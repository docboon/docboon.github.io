<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>3.&nbsp;&#29983;&#25104;&#25105;&#20204;&#38656;&#35201;&#30340;&#25991;&#20214;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="DocBook&#31616;&#35201;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="ch01.html" title="&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#21046;&#20316;&#31532;&#19968;&#20221;DocBook&#25991;&#26723;"><link rel="prev" href="ch01s02.html" title="2.&nbsp;&#20070;&#20889;DocBook&#26684;&#24335;&#30340;xml&#25991;&#20214;"><link rel="next" href="ch02.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#21046;&#20316;&#26356;&#23436;&#25972;&#30340;DocBook&#25991;&#26723;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.&nbsp;&#29983;&#25104;&#25105;&#20204;&#38656;&#35201;&#30340;&#25991;&#20214;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#21046;&#20316;&#31532;&#19968;&#20221;DocBook&#25991;&#26723;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr></table></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e616"></a>3.&nbsp;&#29983;&#25104;&#25105;&#20204;&#38656;&#35201;&#30340;&#25991;&#20214;</h2></div></div></div><p>&#23558;<code class="filename">firstbook.xml</code>&#25991;&#20214;&#36716;&#25442;&#20026;&#25105;&#20204;&#38656;&#35201;&#30340;&#26684;&#24335;&#65292;&#22914;html&#25110;&#32773;pdf&#65292;&#38656;&#35201;&#30456;&#24212;&#30340;DocBook-xsl&#26679;&#24335;&#34920;&#21450;saxon&#21644;fop&#31243;&#24207;&#12290;</p><p>&#26679;&#24335;&#34920;&#30446;&#24405;<code class="filename">DocBook-xsl-1.79.1</code>&#19979;&#26377;&#24456;&#22810;&#30446;&#24405;&#21644;&#25991;&#20214;&#65292;&#19979;&#38754;&#30340;&#34920;&#26684;&#21015;&#20986;&#20102;&#19968;&#20123;&#20250;&#24120;&#29992;&#30340;&#65306;</p><div class="table"><a name="d0e629"></a><p class="title"><b>&#34920;&nbsp;1.2.&nbsp;&#26679;&#24335;&#34920;&#30446;&#24405;&#21450;&#20316;&#29992;</b></p><div class="table-contents"><table class="table" summary="&#26679;&#24335;&#34920;&#30446;&#24405;&#21450;&#20316;&#29992;" cellspacing="2pt" cellpadding="2pt" style="border-collapse: collapse;border-top: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-bottom: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-left: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-right: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; " width="100%"><colgroup><col width="7%" align="center" class="c1"><col width="31%" align="center" class="c2"><col width="62%" align="center" class="c3"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">No.</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">&#30446;&#24405;&#21517;</th><th style="border-bottom: 1px solid ; " align="center">&#29992;&#36884;</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">1</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">fo</td><td style="border-bottom: 1px solid ; " align="center">&#23558;xml&#25991;&#20214;&#36716;&#25442;&#20026;fo&#25991;&#20214;&#65292;&#28982;&#21518;&#20877;&#23558;fo&#25991;&#20214;&#36716;&#25442;&#20026;pdf&#26684;&#24335;&#30340;&#25991;&#20214;</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">2</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">html</td><td style="border-bottom: 1px solid ; " align="center">&#23558;xml&#25991;&#20214;&#36716;&#25442;&#20026;html&#25991;&#20214;</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">3</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">epub</td><td style="border-bottom: 1px solid ; " align="center">&#23558;xml&#25991;&#20214;&#36716;&#25442;&#20026;epub&#65288;&#30005;&#23376;&#20070;&#65289;&#25991;&#20214;</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">4</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">htmlhelp</td><td style="border-bottom: 1px solid ; " align="center">&#23558;xml&#25991;&#20214;&#36716;&#25442;&#20026;htmlhelp&#25991;&#20214;</td></tr><tr><td style="border-right: 1px solid ; " align="center">5</td><td style="border-right: 1px solid ; " align="center">slides</td><td style="" align="center">&#21046;&#20316;&#24187;&#28783;&#29255;&#65288;&#31867;&#20284;ppt&#65289;&#30340;&#26679;&#24335;&#34920;</td></tr></tbody></table></div></div><br class="table-break"><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e681"></a>3.1.&nbsp;&#36716;&#25442;&#20026;html&#25991;&#20214;</h3></div></div></div><p>&#36716;&#25442;&#20026;html&#25991;&#20214;&#27604;&#36739;&#31616;&#21333;&#65292;&#22914;&#26524;&#21482;&#26159;&#36716;&#25442;&#20026;&#21487;&#20197;&#22312;&#32447;&#38405;&#35835;&#30340;&#25991;&#26723;&#65292;&#22312;&#26679;&#24335;&#26041;&#38754;&#27809;&#26377;&#29305;&#21035;&#38656;&#27714;&#30340;&#35805;&#65292;&#20351;&#29992;saxon&#65292;&#25353;&#29031;&#19979;&#38754;&#30340;&#21629;&#20196;&#25191;&#34892;&#23601;&#21487;&#20197;&#20102;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="emphasis"><em>&#36716;&#25442;&#20026;&#21333;&#39029;html</em></span><p>&#23558;<code class="filename">firstbook.xml</code>&#36716;&#25442;&#20026;&#21333;&#39029;html&#25991;&#20214;&#65292;&#20351;&#29992;<code class="filename">DocBook-xsl-1.79.1/html/DocBook.xsl</code>&#25991;&#20214;&#65292;&#21629;&#20196;&#22914;&#19979;&#65306;</p><pre class="screen">docware/jre-8u301-linux-x64/jre1.8.0_301/bin/java -cp \
          docware/saxon6-5-5/saxon.jar:\
          docware/DocBook-xsl-1.79.1/extensions/saxon65.jar:\
          com.icl.saxon.StyleSheet -o firstbook.html firstbook.xml \
          docware/DocBook-xsl-1.79.1/html/DocBook.xsl</pre><p>&#21629;&#20196;&#25191;&#34892;&#32467;&#26463;&#65292;&#20250;&#29983;&#25104;<code class="filename">firstbook.html</code>&#25991;&#20214;&#12290;</p></li><li class="listitem"><span class="emphasis"><em>&#36716;&#25442;&#20026;&#22810;&#39029;html</em></span><p>&#36716;&#25442;&#20026;&#22810;&#20010;html&#25991;&#20214;&#65292;&#20351;&#29992;DocBook-xsl-1.79.1/html/chunk.xsl&#25991;&#20214;&#65292;&#21629;&#20196;&#22914;&#19979;&#65306;</p><pre class="screen">docware/jre-8u301-linux-x64/jre1.8.0_301/bin/java -cp \
          docware/saxon6-5-5/saxon.jar:\
          docware/DocBook-xsl-1.79.1/extensions/saxon65.jar:\
          com.icl.saxon.StyleSheet firstbook.xml \
          docware/DocBook-xsl-1.79.1/html/chunk.xsl</pre><p>&#21629;&#20196;&#25191;&#34892;&#32467;&#26463;&#65292;&#20250;&#29983;&#25104;&#20197;<code class="filename">index.html</code>&#20026;&#32034;&#24341;&#30340;&#19968;&#26063;html&#25991;&#20214;&#12290;</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e717"></a>3.2.&nbsp;&#36716;&#25442;&#20026;pdf&#25991;&#20214;</h3></div></div></div><p>&#22914;&#26524;html&#25991;&#20214;&#36866;&#21512;&#22312;&#32447;&#27983;&#35272;&#30340;&#35805;&#65292;&#37027;&#23545;&#20110;&#26377;&#25171;&#21360;&#38656;&#27714;&#30340;&#20154;&#26469;&#35828;&#65292;pdf&#21487;&#33021;&#26159;&#26368;&#22909;&#30340;&#36873;&#25321;&#12290;&#20174;xml&#36716;&#25442;&#21040;pdf&#21487;&#33021;&#35201;&#40635;&#28902;&#19968;&#28857;&#65292;&#38656;&#35201;&#20808;&#20351;&#29992;saxon&#23558;xml&#25991;&#20214;&#36716;&#25442;&#20026;fo&#25991;&#20214;&#65292;&#28982;&#21518;&#20877;&#20351;&#29992;fop&#23558;fo&#25991;&#20214;&#36716;&#25442;&#20026;pdf&#25991;&#20214;&#12290;&#20026;&#20102;&#33021;&#24471;&#21040;&#26174;&#31034;&#33391;&#22909;&#30340;pdf&#25991;&#20214;&#65292;&#22312;&#36716;&#25442;&#20043;&#21069;&#38656;&#35201;&#20808;&#20570;&#20004;&#20214;&#20934;&#22791;&#24037;&#20316;&#12290;&#19968;&#26159;&#37197;&#32622;<code class="filename">fop.conf</code>&#25991;&#20214;&#65292;&#20108;&#26159;&#23545;&#38024;&#23545;fo&#30340;DocBook-xsl&#20570;&#36866;&#24403;&#30340;&#35843;&#25972;&#12290;</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d0e725"></a>3.2.1.&nbsp;&#37197;&#32622;fop.conf&#25991;&#20214;</h4></div></div></div><p>&#37197;&#32622;fop.conf&#30340;&#20027;&#35201;&#30446;&#30340;&#23601;&#26159;&#33021;&#35753;&#21512;&#36866;&#30340;&#23383;&#20307;&#21152;&#36733;&#21040;pdf&#25991;&#20214;&#20013;&#65292;&#22914;&#26524;&#25214;&#19981;&#21040;&#21512;&#36866;&#30340;&#23383;&#20307;&#65292;pdf&#25991;&#20214;&#21487;&#33021;&#20250;&#26174;&#31034;&#20081;&#30721;&#12290;&#22312;&#30446;&#24405;<code class="filename">fop-2.4-bin/fop/conf/</code>&#20013;&#65292;&#26377;&#19968;&#20010;<code class="filename">fop.xconf</code>&#25991;&#20214;&#65292;&#23558;&#36825;&#20221;&#25991;&#20214;&#22797;&#21046;&#19968;&#20221;&#65292;&#24182;&#23558;&#22797;&#21046;&#21518;&#30340;&#25991;&#20214;&#37325;&#26032;&#21629;&#21517;&#20026;<code class="filename">fop.conf</code>&#12290;&#24182;&#23545;&#36825;&#20010;&#25991;&#20214;&#20570;&#20004;&#22788;&#20462;&#25913;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#22312;&lt;base&gt;.&lt;/base&gt;&#19979;&#28155;&#21152;&#19968;&#34892;&#65292;&#22914;&#19979;&#65306;</p><pre class="screen">&lt;base&gt;.&lt;/base&gt;
&lt;font-base&gt;/usr/share/fonts&lt;/font-base&gt;</pre><p>&#36825;&#19968;&#34892;&#30340;&#24847;&#20041;&#26159;&#35753;fop&#21487;&#20197;&#21040;&#36825;&#20010;&#30446;&#24405;&#37324;&#21435;&#23547;&#25214;&#23383;&#20307;&#12290;&#38656;&#35201;&#26681;&#25454;&#23383;&#20307;&#30340;&#20855;&#20307;&#30446;&#24405;&#26469;&#35774;&#23450;&#12290;</p></li><li class="listitem"><p>&#22312;&lt;fonts&gt;&lt;/fonts&gt;&#33410;&#28857;&#20013;&#28155;&#21152;&#22914;&#19979;&#30340;&#23383;&#20307;&#20449;&#24687;&#65306;</p><pre class="screen">&lt;auto-detect/&gt;

&lt;font kerning="yes" embed-url="/usr/local/docware/fonts/SourceHanSerifCN-Regular.otf"&gt;
  &lt;font-triplet name="Source Han Serif CN" style="normal" weight="normal"/&gt;
&lt;/font&gt; 

&lt;font kerning="yes" embed-url="/usr/local/docware/fonts/SourceHanSansCN-Regular.otf"&gt;
  &lt;font-triplet name="Source Han Sans CN" style="normal" weight="normal"/&gt;
&lt;/font&gt;

&lt;font kerning="yes" embed-url="/usr/local/docware/fonts/SourceHanMonoSC-Regular.otf"&gt;
  &lt;font-triplet name="Source Han Mono SC" style="normal" weight="normal"/&gt;
&lt;/font&gt;</pre></li></ol></div><p>&#32463;&#36807;&#36825;&#26679;&#31616;&#21333;&#30340;&#37197;&#32622;&#65292;&#23383;&#20307;&#23601;&#22312;fop&#20013;&#37197;&#32622;&#22909;&#20102;&#12290;&#20854;&#20013;&#30340;auto-detect&#26159;&#33258;&#21160;&#26816;&#27979;&#31995;&#32479;&#20013;&#23433;&#35013;&#30340;&#23383;&#20307;&#12290;&#21518;&#38754;&#19977;&#20010;font&#33410;&#28857;&#37197;&#32622;&#30340;&#23601;&#26159;&#21069;&#38754;&#25105;&#20204;&#19979;&#36733;&#30340;&#19977;&#20010;&#23383;&#20307;&#12290;</p><p>fop&#35814;&#32454;&#30340;&#37197;&#32622;&#20449;&#24687;&#35831;&#21442;&#32771;&#65306;https://xmlgraphics.apache.org/fop/2.4/configuration.html</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d0e757"></a>3.2.2.&nbsp;&#35774;&#32622;fop&#33050;&#26412;</h4></div></div></div><p>fop&#35774;&#32622;&#30340;&#21478;&#22806;&#19968;&#20010;&#24037;&#20316;&#65292;&#23601;&#26159;&#38656;&#35201;&#22312;<code class="filename">fop-2.4-bin/fop/fop</code>&#33050;&#26412;&#20013;&#28155;&#21152;classpath&#12290;</p><pre class="screen">#! /bin/sh
#
#   Licensed to the Apache Software Foundation (ASF) under one or more
#   ...
#   This script was modified by ChunXin &lt;484299@qq.com&gt;, 2021/09

DOCWARE_HOME="/usr/local/docware"

JAVA_HOME="$DOCWARE_HOME/jre-8u301-linux-x64/jre1.8.0_301"
FOP_HOME="$DOCWARE_HOME/fop-2.6-bin/fop"
XSL_EXTENSIONS="$DOCWARE_HOME/docbook-xsl-1.79./extensions"

CLASSPATH="$CLASSPATH:\
$FOP_HOME/build/fop.jar:\
$FOP_HOME/build/fop-hyph.jar:\
$FOP_HOME/lib/batik-all-1.14.jar:\
$FOP_HOME/lib/commons-io-1.3.1.jar:\
$FOP_HOME/lib/commons-logging-1.0.4.jar:\
$FOP_HOME/lib/fontbox-2.0.19.jar:\
$FOP_HOME/lib/serializer-2.7.2.jar:\
$FOP_HOME/lib/xalan-2.7.2.jar:\
$FOP_HOME/lib/xercesImpl-2.12.0.jar:\
$FOP_HOME/lib/xml-apis-1.4.01.jar:\
$FOP_HOME/lib/xml-apis-ext-1.3.04.jar:\
$FOP_HOME/lib/xmlgraphics-commons-2.6.jar"

export JAVA_HOME FOP_HOME XSL_EXTENSIONS CLASSPATH</pre><p>&#23558;&#19978;&#38754;&#30340;&#36825;&#27573;&#20195;&#30721;&#21152;&#22312;<code class="filename">fop-2.4-bin/fop/fop</code>&#30340;&#21069;&#38754;&#12290;</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d0e773"></a>3.2.3.&nbsp;DocBook-xsl&#21442;&#25968;&#35843;&#25972;</h4></div></div></div><p>&#20851;&#20110;&#26679;&#24335;&#34920;&#21442;&#25968;&#30340;&#35843;&#25972;&#65292;&#20027;&#35201;&#26159;&#35843;&#25972;<code class="filename">DocBook-xsl-1.79.1/fo/param.xsl</code>&#37324;&#30340;&#19968;&#20123;&#20869;&#23481;</p><pre class="programlisting">&nbsp;&nbsp;1 &lt;xsl:param name="l10n.gentext.default.language"&gt;zh_cn&lt;/xsl:param&gt;
&nbsp;&nbsp;2 &lt;xsl:param name="l10n.gentext.language"&gt;zh_cn&lt;/xsl:param&gt;
&nbsp;&nbsp;3 
&nbsp;&nbsp;4 &lt;xsl:param name="paper.type"&gt;A4&lt;/xsl:param&gt;
&nbsp;&nbsp;5 
&nbsp;&nbsp;6 &lt;xsl:param name="body.font.family"&gt;Source Han Serif CN,serif&lt;/xsl:param&gt; 
&nbsp;&nbsp;7 &lt;xsl:param name="title.font.family"&gt;Source Han Sans CN,sans&lt;/xsl:param&gt; 
&nbsp;&nbsp;8 &lt;xsl:param name="monospace.font.family"&gt;Source Han Mono SC,monospace&lt;/xsl:param&gt; 
&nbsp;&nbsp;9 
&nbsp;10 &lt;xsl:param name="line-height"&gt;1.7&lt;/xsl:param&gt;</pre><p>&#19978;&#38754;&#30340;&#36825;&#27573;&#20195;&#30721;&#20027;&#35201;&#26159;&#23545;&#35821;&#35328;&#12289;&#29256;&#38754;&#22823;&#23567;&#12289;&#23383;&#20307;&#21644;&#34892;&#38388;&#36317;&#36827;&#34892;&#20102;&#35843;&#25972;&#12290;</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d0e787"></a>3.2.4.&nbsp;&#29983;&#25104;pdf&#25991;&#20214;</h4></div></div></div><p><code class="filename">fop.conf</code>&#21644;&#26679;&#24335;&#34920;&#37197;&#32622;&#22909;&#20197;&#21518;&#65292;&#23601;&#21487;&#20197;&#29983;&#25104;pdf&#26684;&#24335;&#30340;&#25991;&#20214;&#20102;&#12290;&#20998;&#20026;&#20004;&#27493;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="emphasis"><em>&#29983;&#25104;fo&#25991;&#20214;</em></span><p>&#31532;&#19968;&#27493;&#39318;&#20808;&#26159;&#35201;&#29983;&#25104;fo&#25991;&#20214;&#65292;&#19982;&#29983;&#25104;&#21333;&#39029;html&#25991;&#20214;&#31867;&#20284;&#65292;&#20351;&#29992;<span class="command"><strong>saxon</strong></span>&#65292;&#21482;&#38656;&#35201;&#25226;&#26679;&#24335;&#34920;<code class="filename">html/DocBook.xsl</code>&#26356;&#25442;&#20026;<code class="filename">fo/DocBook.xsl</code>&#65306;</p><pre class="screen">docware/jre-8u301-linux-x64/jre1.8.0_301/bin/java -cp \
          docware/saxon6-5-5/saxon.jar:\
          docware/DocBook-xsl-1.79.1/extensions/saxon65.jar:\
          com.icl.saxon.StyleSheet -o firstbook.fo firstbook.xml \
          docware/DocBook-xsl-1.79.1/fo/DocBook.xsl</pre></li><li class="listitem"><span class="emphasis"><em>&#23558;fo&#25991;&#20214;&#36716;&#25442;&#20026;pdf</em></span><p>&#28982;&#21518;&#20351;&#29992;<span class="command"><strong>fop</strong></span>&#31243;&#24207;&#23558;fo&#25991;&#20214;&#36716;&#25442;&#20026;pdf&#25991;&#20214;&#65306;</p><pre class="screen">fop-2.4-bin/fop/fop firstbook.fo firstbook.pdf -c fop-2.4-bin/fop/conf/fop.conf</pre></li></ol></div></div></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch01.html"><img src="themes/default/navig/up.png" alt="&#19978;&#19968;&#32423;"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr><tr><td width="40%" align="left" valign="top">2.&nbsp;&#20070;&#20889;DocBook&#26684;&#24335;&#30340;xml&#25991;&#20214;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="themes/default/navig/home.png" alt="&#36215;&#22987;&#39029;"></a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#21046;&#20316;&#26356;&#23436;&#25972;&#30340;DocBook&#25991;&#26723;</td></tr></table></div></body></html>