<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>2.&nbsp;Caddyfile&#37197;&#32622;&#25991;&#20214;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="Caddy&#20351;&#29992;&#25163;&#20876;"><link rel="up" href="ch02.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;"><link rel="prev" href="ch02.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;"><link rel="next" href="ch02s03.html" title="3.&nbsp;&#23581;&#35797;&#20351;&#29992;caddyAPI &amp; JSON"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;Caddyfile&#37197;&#32622;&#25991;&#20214;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s03.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr></table></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e412"></a>2.&nbsp;Caddyfile&#37197;&#32622;&#25991;&#20214;</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e415"></a>2.1.&nbsp;Hello World! ( Caddyfile )</h3></div></div></div><p>&#22312;caddy&#30340;&#37197;&#32622;&#26041;&#24335;&#20013;&#65292;Caddyfile&#25991;&#20214;&#23545;&#20154;&#26469;&#35828;&#26159;&#27604;&#36739;&#23481;&#26131;&#38405;&#35835;&#30340;&#12290;&#25105;&#20204;&#32534;&#36753;&#19968;&#20010;&#25991;&#20214;&#65292;&#21517;&#20026;<code class="filename">Caddyfile</code>&#65288;&#27809;&#26377;&#25193;&#23637;&#21517;&#65292;C&#23383;&#27597;&#22823;&#20889;&#65292;&#20854;&#20182;&#23383;&#27597;&#23567;&#20889;&#65281;&#65289;&#12290;&#22312;<code class="filename">Caddyfile</code>&#20013;&#21152;&#20837;&#22914;&#19979;&#20869;&#23481;&#65306;</p><pre class="screen">:2015
respond "Hello, world!"</pre><p>&#29616;&#22312;&#20572;&#27490;caddy&#30340;&#36816;&#34892;&#65292;&#20351;&#29992;&#65288;Ctrl+C&#65289;&#65292;&#22914;&#26524;&#26159;&#36816;&#34892;&#22312;&#23432;&#25252;&#36827;&#31243;&#29366;&#24577;&#19979;&#30340;&#35805;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy stop</strong></span>&#21629;&#20196;&#12290;&#28982;&#21518;&#65292;&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#20877;&#27425;&#36816;&#34892;caddy</p><pre class="screen">caddy run</pre><p>&#36825;&#20010;&#21629;&#20196;&#20250;&#22312;&#24403;&#21069;&#30446;&#24405;&#19979;&#23547;&#25214;<code class="filename">Caddyfile</code>&#25991;&#20214;&#65292;&#24182;&#30452;&#25509;&#21152;&#36733;&#23427;&#12290;&#22914;&#26524;<code class="filename">Caddyfile</code>&#36825;&#20010;&#25991;&#20214;&#20445;&#23384;&#22312;&#20854;&#20182;&#20301;&#32622;&#65292;&#37027;&#38656;&#35201;&#25351;&#26126;&#20855;&#20307;&#30340;&#36335;&#24452;&#65306;</p><pre class="screen">caddy run --config /path/to/Caddyfile</pre><p>&#23454;&#38469;&#19978;&#65292;&#19978;&#38754;&#30340;&#21629;&#20196;&#26159;&#19979;&#38754;&#19968;&#34892;&#21629;&#20196;&#30340;&#32553;&#20889;&#65292;&#30465;&#25481;&#20102;<code class="option">--adapter caddyfile</code>&#65292;&#22240;&#20026;&#40664;&#35748;&#24773;&#20917;&#19979;caddy&#20351;&#29992;Caddyfile adapter&#65292;</p><pre class="screen">caddy run --adapter caddyfile --config /path/to/Caddyfile</pre><p>&#25509;&#19979;&#26469;&#65292;&#22312;&#21478;&#22806;&#19968;&#20010;&#32456;&#31471;&#20013;&#36755;&#20837;&#65306;<span class="command"><strong>curl https://localhost</strong></span>&#65292;&#23601;&#20250;&#30475;&#21040;&#8221;Hello World!&#8220;&#12290;</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e457"></a>2.2.&nbsp;&#37197;&#32622;&#22810;&#31449;&#28857; ( Caddyfile &amp; API )</h3></div></div></div><p>&#29616;&#22312;&#25105;&#20204;&#26356;&#25913;<code class="filename">Caddyfile</code>&#65292;&#22312;&#20854;&#20013;&#23450;&#20041;&#20004;&#20010;&#31449;&#28857;&#65292;&#20869;&#23481;&#22914;&#19979;&#65306;</p><pre class="screen">localhost {
	respond "Hello, world!"
}

localhost:2016 {
	respond "Goodbye, world!"
}</pre><p>&#25105;&#20204;&#20351;&#29992;API&#30340;&#26041;&#24335;&#23558;&#36825;&#20123;&#20869;&#23481;&#21152;&#36733;&#21040;&#31995;&#32479;&#20013;&#65292;&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#65306;</p><pre class="screen">curl localhost:2019/load \
	-X POST \
	-H "Content-Type: text/caddyfile" \
	--data-binary @Caddyfile</pre><p>&#28982;&#21518;&#20351;&#29992;<span class="command"><strong>curl https://localhost:2016</strong></span>&#21629;&#20196;&#65292;&#20415;&#20250;&#30475;&#21040;&#8220;Goodbye, world!&#8221;</p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html"><img src="themes/default/navig/up.png" alt="&#19978;&#19968;&#32423;"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s03.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="themes/default/navig/home.png" alt="&#36215;&#22987;&#39029;"></a></td><td width="40%" align="right" valign="top">&nbsp;3.&nbsp;&#23581;&#35797;&#20351;&#29992;caddyAPI &amp; JSON</td></tr></table></div></body></html>