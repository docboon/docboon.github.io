<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>3.&nbsp;&#38450;&#33539;&#25514;&#26045;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="ssh&#26292;&#21147;&#30772;&#35299;&#26085;&#24535;&#31616;&#35201;&#35828;&#26126;"><link rel="up" href="index.html" title="ssh&#26292;&#21147;&#30772;&#35299;&#26085;&#24535;&#31616;&#35201;&#35828;&#26126;"><link rel="prev" href="ar01s02.html" title="2.&nbsp;&#30456;&#20851;&#26085;&#24535;&#35299;&#26512;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.&nbsp;&#38450;&#33539;&#25514;&#26045;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;</td></tr></table></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e198"></a>3.&nbsp;&#38450;&#33539;&#25514;&#26045;</h2></div></div></div><p>&#35201;&#38450;&#27490;&#36825;&#26679;&#30340;&#19968;&#20123;&#24694;&#24847;&#34892;&#20026;&#65292;&#21487;&#20197;&#20174;&#20004;&#20010;&#26041;&#38754;&#26469;&#23436;&#21892;&#25105;&#20204;&#30340;ssh&#31995;&#32479;&#12290;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#20570;&#22909;&#21512;&#29702;&#30340;&#35774;&#32622;&#65307;</li><li class="listitem">&#37319;&#21462;&#24517;&#35201;&#30340;&#23433;&#20840;&#25514;&#26045;&#12290;</li></ol></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e208"></a>3.1.&nbsp;&#35774;&#32622;&#37197;&#32622;&#25991;&#20214;</h3></div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;ssh&#26381;&#21153;&#22120;&#30340;&#37197;&#32622;&#25991;&#20214;&#26159;<code class="filename">/etc/ssh/sshd_config</code>&#12290;&#19968;&#20123;&#20027;&#35201;&#30340;&#37197;&#32622;&#39033;&#22914;&#19979;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>AllowGroups</strong></span><p>&#36825;&#20010;&#25351;&#20196;&#21518;&#38754;&#36319;&#30528;&#19968;&#20018;&#29992;&#31354;&#26684;&#20998;&#38548;&#30340;&#32452;&#21517;&#21015;&#34920;(&#20854;&#20013;&#21487;&#20197;&#20351;&#29992;"*"&#21644;"?"&#36890;&#37197;&#31526;)&#12290;&#40664;&#35748;&#20801;&#35768;&#25152;&#26377;&#32452;&#30331;&#24405;&#12290;&#22914;&#26524;&#20351;&#29992;&#20102;&#36825;&#20010;&#25351;&#20196;&#65292;&#37027;&#20040;&#23558;&#20165;&#20801;&#35768;&#36825;&#20123;&#32452;&#20013;&#30340;&#25104;&#21592;&#30331;&#24405;&#65292;&#32780;&#25298;&#32477;&#20854;&#23427;&#25152;&#26377;&#32452;&#12290;&#36825;&#37324;&#30340;"&#32452;"&#26159;&#25351;"&#20027;&#32452;"(primary group)&#65292;&#20063;&#23601;&#26159;<code class="filename">/etc/passwd</code>&#25991;&#20214;&#20013;&#25351;&#23450;&#30340;&#32452;&#12290;&#36825;&#37324;&#21482;&#20801;&#35768;&#20351;&#29992;&#32452;&#30340;&#21517;&#23383;&#32780;&#19981;&#20801;&#35768;&#20351;&#29992;GID&#12290;&#30456;&#20851;&#30340; allow/deny &#25351;&#20196;&#25353;&#29031;&#19979;&#21015;&#39034;&#24207;&#22788;&#29702;&#65306;DenyUsers, AllowUsers, DenyGroups, AllowGroups</p></li><li class="listitem"><span class="command"><strong>AllowUsers</strong></span><p>&#36825;&#20010;&#25351;&#20196;&#21518;&#38754;&#36319;&#30528;&#19968;&#20018;&#29992;&#31354;&#26684;&#20998;&#38548;&#30340;&#29992;&#25143;&#21517;&#21015;&#34920;(&#20854;&#20013;&#21487;&#20197;&#20351;&#29992;"*"&#21644;"?"&#36890;&#37197;&#31526;)&#12290;&#40664;&#35748;&#20801;&#35768;&#25152;&#26377;&#29992;&#25143;&#30331;&#24405;&#12290;&#22914;&#26524;&#20351;&#29992;&#20102;&#36825;&#20010;&#25351;&#20196;&#65292;&#37027;&#20040;&#23558;&#20165;&#20801;&#35768;&#36825;&#20123;&#29992;&#25143;&#30331;&#24405;&#65292;&#32780;&#25298;&#32477;&#20854;&#23427;&#25152;&#26377;&#29992;&#25143;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102; USER@HOST &#27169;&#24335;&#30340;&#29992;&#25143;&#65292;&#37027;&#20040; USER &#21644; HOST &#23558;&#21516;&#26102;&#34987;&#26816;&#26597;&#12290;&#36825;&#37324;&#21482;&#20801;&#35768;&#20351;&#29992;&#29992;&#25143;&#30340;&#21517;&#23383;&#32780;&#19981;&#20801;&#35768;&#20351;&#29992;UID&#12290;&#30456;&#20851;&#30340; allow/deny &#25351;&#20196;&#25353;&#29031;&#19979;&#21015;&#39034;&#24207;&#22788;&#29702;&#65306;DenyUsers, AllowUsers, DenyGroups, AllowGroups  </p></li><li class="listitem"><span class="command"><strong>AuthorizedKeysFile</strong></span><p>&#23384;&#25918;&#35813;&#29992;&#25143;&#21487;&#20197;&#29992;&#26469;&#30331;&#24405;&#30340; RSA/DSA &#20844;&#38053;&#12290;&#35813;&#25351;&#20196;&#20013;&#21487;&#20197;&#20351;&#29992;&#19979;&#21015;&#26681;&#25454;&#36830;&#25509;&#26102;&#30340;&#23454;&#38469;&#24773;&#20917;&#36827;&#34892;&#23637;&#24320;&#30340;&#31526;&#21495;&#65306;%% &#34920;&#31034;'%'&#12289;%h &#34920;&#31034;&#29992;&#25143;&#30340;&#20027;&#30446;&#24405;&#12289;%u &#34920;&#31034;&#35813;&#29992;&#25143;&#30340;&#29992;&#25143;&#21517;&#12290;&#32463;&#36807;&#25193;&#23637;&#20043;&#21518;&#30340;&#20540;&#24517;&#39035;&#35201;&#20040;&#26159;&#32477;&#23545;&#36335;&#24452;&#65292;&#35201;&#20040;&#26159;&#30456;&#23545;&#20110;&#29992;&#25143;&#20027;&#30446;&#24405;&#30340;&#30456;&#23545;&#36335;&#24452;&#12290;&#40664;&#35748;&#20540;&#26159;".ssh/authorized_keys"&#12290;  </p></li><li class="listitem"><span class="command"><strong>Banner</strong></span><p>&#23558;&#36825;&#20010;&#25351;&#20196;&#25351;&#23450;&#30340;&#25991;&#20214;&#20013;&#30340;&#20869;&#23481;&#22312;&#29992;&#25143;&#36827;&#34892;&#35748;&#35777;&#21069;&#26174;&#31034;&#32473;&#36828;&#31243;&#29992;&#25143;&#12290;&#36825;&#20010;&#29305;&#24615;&#20165;&#33021;&#29992;&#20110;SSH-2&#65292;&#40664;&#35748;&#20160;&#20040;&#20869;&#23481;&#20063;&#19981;&#26174;&#31034;&#12290;"none"&#34920;&#31034;&#31105;&#29992;&#36825;&#20010;&#29305;&#24615;&#12290;  </p></li><li class="listitem"><span class="command"><strong>Ciphers</strong></span><p>&#25351;&#23450;SSH-2&#20801;&#35768;&#20351;&#29992;&#30340;&#21152;&#23494;&#31639;&#27861;&#12290;&#22810;&#20010;&#31639;&#27861;&#20043;&#38388;&#20351;&#29992;&#36887;&#21495;&#20998;&#38548;&#12290;&#21487;&#20197;&#20351;&#29992;&#30340;&#31639;&#27861;&#22914;&#19979;&#65306;"aes128-cbc", "aes192-cbc", "aes256-cbc", "aes128-ctr", "aes192-ctr", "aes256-ctr","3des-cbc", "arcfour128", "arcfour256", "arcfour", "blowfish-cbc", "cast128-cbc"&#40664;&#35748;&#20540;&#26159;&#21487;&#20197;&#20351;&#29992;&#19978;&#36848;&#25152;&#26377;&#31639;&#27861;&#12290;  </p></li><li class="listitem"><span class="command"><strong>ClientAliveCountMax</strong></span><p>sshd(8) &#22312;&#26410;&#25910;&#21040;&#20219;&#20309;&#23458;&#25143;&#31471;&#22238;&#24212;&#21069;&#26368;&#22810;&#20801;&#35768;&#21457;&#36865;&#22810;&#23569;&#20010;"alive"&#28040;&#24687;&#12290;&#40664;&#35748;&#20540;&#26159; 3 &#12290;&#21040;&#36798;&#36825;&#20010;&#19978;&#38480;&#21518;&#65292;sshd(8) &#23558;&#24378;&#21046;&#26029;&#24320;&#36830;&#25509;&#12289;&#20851;&#38381;&#20250;&#35805;&#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;"alive"&#28040;&#24687;&#19982; TCPKeepAlive &#26377;&#24456;&#22823;&#24046;&#24322;&#12290;"alive"&#28040;&#24687;&#26159;&#36890;&#36807;&#21152;&#23494;&#36830;&#25509;&#21457;&#36865;&#30340;&#65292;&#22240;&#27492;&#19981;&#20250;&#34987;&#27450;&#39575;&#65307;&#32780;TCPKeepAlive&#21364;&#26159;&#21487;&#20197;&#34987;&#27450;&#39575;&#30340;&#12290;&#22914;&#26524; ClientAliveInterval &#34987;&#35774;&#20026; 15 &#24182;&#19988;&#23558; ClientAliveCountMax &#20445;&#25345;&#20026;&#40664;&#35748;&#20540;&#65292;&#37027;&#20040;&#26080;&#24212;&#31572;&#30340;&#23458;&#25143;&#31471;&#22823;&#32422;&#20250;&#22312;45&#31186;&#21518;&#34987;&#24378;&#21046;&#26029;&#24320;&#12290;&#36825;&#20010;&#25351;&#20196;&#20165;&#21487;&#20197;&#29992;&#20110;SSH-2&#21327;&#35758;&#12290;  </p></li><li class="listitem"><span class="command"><strong>ClientAliveInterval</strong></span><p>&#35774;&#32622;&#19968;&#20010;&#20197;&#31186;&#35760;&#30340;&#26102;&#38271;&#65292;&#22914;&#26524;&#36229;&#36807;&#36825;&#20040;&#38271;&#26102;&#38388;&#27809;&#26377;&#25910;&#21040;&#23458;&#25143;&#31471;&#30340;&#20219;&#20309;&#25968;&#25454;&#65292;sshd(8) &#23558;&#36890;&#36807;&#23433;&#20840;&#36890;&#36947;&#21521;&#23458;&#25143;&#31471;&#21457;&#36865;&#19968;&#20010;"alive"&#28040;&#24687;&#65292;&#24182;&#31561;&#20505;&#24212;&#31572;&#12290;&#40664;&#35748;&#20540; 0 &#34920;&#31034;&#19981;&#21457;&#36865;"alive"&#28040;&#24687;&#12290;&#36825;&#20010;&#36873;&#39033;&#20165;&#23545;SSH-2&#26377;&#25928;&#12290;  </p></li><li class="listitem"><span class="command"><strong>Compression</strong></span><p>&#26159;&#21542;&#23545;&#36890;&#20449;&#25968;&#25454;&#36827;&#34892;&#21152;&#23494;&#65292;&#36824;&#26159;&#24310;&#36831;&#21040;&#35748;&#35777;&#25104;&#21151;&#20043;&#21518;&#20877;&#23545;&#36890;&#20449;&#25968;&#25454;&#21152;&#23494;&#12290;&#21487;&#29992;&#20540;&#65306;"yes", "delayed"(&#40664;&#35748;), "no"&#12290;  </p></li><li class="listitem"><span class="command"><strong>DenyGroups</strong></span><p>&#36825;&#20010;&#25351;&#20196;&#21518;&#38754;&#36319;&#30528;&#19968;&#20018;&#29992;&#31354;&#26684;&#20998;&#38548;&#30340;&#32452;&#21517;&#21015;&#34920;(&#20854;&#20013;&#21487;&#20197;&#20351;&#29992;"*"&#21644;"?"&#36890;&#37197;&#31526;)&#12290;&#40664;&#35748;&#20801;&#35768;&#25152;&#26377;&#32452;&#30331;&#24405;&#12290;&#22914;&#26524;&#20351;&#29992;&#20102;&#36825;&#20010;&#25351;&#20196;&#65292;&#37027;&#20040;&#36825;&#20123;&#32452;&#20013;&#30340;&#25104;&#21592;&#23558;&#34987;&#25298;&#32477;&#30331;&#24405;&#12290;&#36825;&#37324;&#30340;"&#32452;"&#26159;&#25351;"&#20027;&#32452;"(primary group)&#65292;&#20063;&#23601;&#26159;/etc/passwd&#25991;&#20214;&#20013;&#25351;&#23450;&#30340;&#32452;&#12290;&#36825;&#37324;&#21482;&#20801;&#35768;&#20351;&#29992;&#32452;&#30340;&#21517;&#23383;&#32780;&#19981;&#20801;&#35768;&#20351;&#29992;GID&#12290;&#30456;&#20851;&#30340; allow/deny &#25351;&#20196;&#25353;&#29031;&#19979;&#21015;&#39034;&#24207;&#22788;&#29702;&#65306;DenyUsers, AllowUsers, DenyGroups, AllowGroups</p></li><li class="listitem"><span class="command"><strong>DenyUsers</strong></span><p>&#36825;&#20010;&#25351;&#20196;&#21518;&#38754;&#36319;&#30528;&#19968;&#20018;&#29992;&#31354;&#26684;&#20998;&#38548;&#30340;&#29992;&#25143;&#21517;&#21015;&#34920;(&#20854;&#20013;&#21487;&#20197;&#20351;&#29992;"*"&#21644;"?"&#36890;&#37197;&#31526;)&#12290;&#40664;&#35748;&#20801;&#35768;&#25152;&#26377;&#29992;&#25143;&#30331;&#24405;&#12290;&#22914;&#26524;&#20351;&#29992;&#20102;&#36825;&#20010;&#25351;&#20196;&#65292;&#37027;&#20040;&#36825;&#20123;&#29992;&#25143;&#23558;&#34987;&#25298;&#32477;&#30331;&#24405;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102; USER@HOST &#27169;&#24335;&#30340;&#29992;&#25143;&#65292;&#37027;&#20040; USER &#21644; HOST &#23558;&#21516;&#26102;&#34987;&#26816;&#26597;&#12290;&#36825;&#37324;&#21482;&#20801;&#35768;&#20351;&#29992;&#29992;&#25143;&#30340;&#21517;&#23383;&#32780;&#19981;&#20801;&#35768;&#20351;&#29992;UID&#12290;&#30456;&#20851;&#30340; allow/deny &#25351;&#20196;&#25353;&#29031;&#19979;&#21015;&#39034;&#24207;&#22788;&#29702;&#65306;DenyUsers, AllowUsers, DenyGroups, AllowGroups  </p></li><li class="listitem"><span class="command"><strong>HostbasedAuthentication</strong></span><p>&#36825;&#20010;&#25351;&#20196;&#19982; RhostsRSAAuthentication &#31867;&#20284;&#65292;&#20294;&#26159;&#20165;&#21487;&#20197;&#29992;&#20110;SSH-2&#12290;&#25512;&#33616;&#20351;&#29992;&#40664;&#35748;&#20540;"no"&#12290;&#25512;&#33616;&#20351;&#29992;&#40664;&#35748;&#20540;"no"&#31105;&#27490;&#36825;&#31181;&#19981;&#23433;&#20840;&#30340;&#35748;&#35777;&#26041;&#24335;&#12290;  </p></li><li class="listitem"><span class="command"><strong>HostbasedUsesNameFromPacketOnly</strong></span><p>&#22312;&#24320;&#21551; HostbasedAuthentication &#30340;&#24773;&#20917;&#19979;&#65292;&#25351;&#23450;&#26381;&#21153;&#22120;&#22312;&#20351;&#29992; ~/.shosts ~/.rhosts /etc/hosts.equiv &#36827;&#34892;&#36828;&#31243;&#20027;&#26426;&#21517;&#21305;&#37197;&#26102;&#65292;&#26159;&#21542;&#36827;&#34892;&#21453;&#21521;&#22495;&#21517;&#26597;&#35810;&#12290;"yes"&#34920;&#31034; sshd(8) &#20449;&#20219;&#23458;&#25143;&#31471;&#25552;&#20379;&#30340;&#20027;&#26426;&#21517;&#32780;&#19981;&#36827;&#34892;&#21453;&#21521;&#26597;&#35810;&#12290;&#40664;&#35748;&#20540;&#26159;"no"&#12290;</p></li><li class="listitem"><span class="command"><strong>HostKey</strong></span><p>&#20027;&#26426;&#31169;&#38053;&#25991;&#20214;&#30340;&#20301;&#32622;&#12290;&#22914;&#26524;&#26435;&#38480;&#19981;&#23545;&#65292;sshd(8) &#21487;&#33021;&#20250;&#25298;&#32477;&#21551;&#21160;&#12290;SSH-1&#40664;&#35748;&#26159; /etc/ssh/ssh_host_key &#12290;SSH-2&#40664;&#35748;&#26159; /etc/ssh/ssh_host_rsa_key &#21644; /etc/ssh/ssh_host_dsa_key &#12290;&#19968;&#21488;&#20027;&#26426;&#21487;&#20197;&#25317;&#26377;&#22810;&#20010;&#19981;&#21516;&#30340;&#31169;&#38053;&#12290;"rsa1"&#20165;&#29992;&#20110;SSH-1&#65292;"dsa"&#21644;"rsa"&#20165;&#29992;&#20110;SSH-2&#12290;  </p></li><li class="listitem"><span class="command"><strong>ListenAddress</strong></span><p>&#25351;&#23450; sshd(8) &#30417;&#21548;&#30340;&#32593;&#32476;&#22320;&#22336;&#65292;&#40664;&#35748;&#30417;&#21548;&#25152;&#26377;&#22320;&#22336;&#12290;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#30340;&#26684;&#24335;&#65306;

ListenAddress host|IPv4_addr|IPv6_addr
ListenAddress host|IPv4_addr:port
ListenAddress [host|IPv6_addr]:port

&#22914;&#26524;&#26410;&#25351;&#23450; port &#65292;&#37027;&#20040;&#23558;&#20351;&#29992; Port &#25351;&#20196;&#30340;&#20540;&#12290;&#21487;&#20197;&#20351;&#29992;&#22810;&#20010; ListenAddress &#25351;&#20196;&#30417;&#21548;&#22810;&#20010;&#22320;&#22336;&#12290;  </p></li><li class="listitem"><span class="command"><strong>LoginGraceTime</strong></span><p>&#38480;&#21046;&#29992;&#25143;&#24517;&#39035;&#22312;&#25351;&#23450;&#30340;&#26102;&#38480;&#20869;&#35748;&#35777;&#25104;&#21151;&#65292;0 &#34920;&#31034;&#26080;&#38480;&#21046;&#12290;&#40664;&#35748;&#20540;&#26159;120&#31186;&#12290;</p></li><li class="listitem"><span class="command"><strong>LogLevel</strong></span><p>&#25351;&#23450; sshd(8) &#30340;&#26085;&#24535;&#31561;&#32423;(&#35814;&#32454;&#31243;&#24230;)&#12290;&#21487;&#29992;&#20540;&#22914;&#19979;&#65306;QUIET, FATAL, ERROR, INFO(&#40664;&#35748;), VERBOSE, DEBUG, DEBUG1, DEBUG2, DEBUG3,DEBUG &#19982; DEBUG1 &#31561;&#20215;&#65307;DEBUG2 &#21644; DEBUG3 &#21017;&#20998;&#21035;&#25351;&#23450;&#20102;&#26356;&#35814;&#32454;&#12289;&#26356;&#32599;&#21990;&#30340;&#26085;&#24535;&#36755;&#20986;&#12290;&#27604; DEBUG &#26356;&#35814;&#32454;&#30340;&#26085;&#24535;&#21487;&#33021;&#20250;&#27844;&#28431;&#29992;&#25143;&#30340;&#25935;&#24863;&#20449;&#24687;&#65292;&#22240;&#27492;&#21453;&#23545;&#20351;&#29992;&#12290;</p></li><li class="listitem"><span class="command"><strong>MaxAuthTries</strong></span><p>&#25351;&#23450;&#27599;&#20010;&#36830;&#25509;&#26368;&#22823;&#20801;&#35768;&#30340;&#35748;&#35777;&#27425;&#25968;&#12290;&#40664;&#35748;&#20540;&#26159; 6 &#12290;&#22914;&#26524;&#22833;&#36133;&#35748;&#35777;&#30340;&#27425;&#25968;&#36229;&#36807;&#36825;&#20010;&#25968;&#20540;&#30340;&#19968;&#21322;&#65292;&#36830;&#25509;&#23558;&#34987;&#24378;&#21046;&#26029;&#24320;&#65292;&#19988;&#20250;&#29983;&#25104;&#39069;&#22806;&#30340;&#22833;&#36133;&#26085;&#24535;&#28040;&#24687;&#12290;  </p></li><li class="listitem"><span class="command"><strong>MaxStartups</strong></span><p>&#26368;&#22823;&#20801;&#35768;&#20445;&#25345;&#22810;&#23569;&#20010;&#26410;&#35748;&#35777;&#30340;&#36830;&#25509;&#12290;&#40664;&#35748;&#20540;&#26159; 10 &#12290;&#21040;&#36798;&#38480;&#21046;&#21518;&#65292;&#23558;&#19981;&#20877;&#25509;&#21463;&#26032;&#36830;&#25509;&#65292;&#38500;&#38750;&#20808;&#21069;&#30340;&#36830;&#25509;&#35748;&#35777;&#25104;&#21151;&#25110;&#36229;&#20986; LoginGraceTime &#30340;&#38480;&#21046;&#12290;</p></li><li class="listitem"><span class="command"><strong>PasswordAuthentication</strong></span><p>&#26159;&#21542;&#20801;&#35768;&#20351;&#29992;&#22522;&#20110;&#23494;&#30721;&#30340;&#35748;&#35777;&#12290;&#40664;&#35748;&#20026;"yes"&#12290; </p></li><li class="listitem"><span class="command"><strong>PermitEmptyPasswords</strong></span><p>&#26159;&#21542;&#20801;&#35768;&#23494;&#30721;&#20026;&#31354;&#30340;&#29992;&#25143;&#36828;&#31243;&#30331;&#24405;&#12290;&#40664;&#35748;&#20026;"no"&#12290;</p></li><li class="listitem"><span class="command"><strong>PermitOpen</strong></span><p>&#25351;&#23450;TCP&#31471;&#21475;&#36716;&#21457;&#20801;&#35768;&#30340;&#30446;&#30340;&#22320;&#65292;&#21487;&#20197;&#20351;&#29992;&#31354;&#26684;&#20998;&#38548;&#22810;&#20010;&#36716;&#21457;&#30446;&#26631;&#12290;&#40664;&#35748;&#20801;&#35768;&#25152;&#26377;&#36716;&#21457;&#35831;&#27714;&#12290;&#21512;&#27861;&#30340;&#25351;&#20196;&#26684;&#24335;&#22914;&#19979;&#65306;
PermitOpen host:port
PermitOpen IPv4_addr:port
PermitOpen [IPv6_addr]:port
"any"&#21487;&#20197;&#29992;&#20110;&#31227;&#38500;&#25152;&#26377;&#38480;&#21046;&#24182;&#20801;&#35768;&#19968;&#20999;&#36716;&#21457;&#35831;&#27714;&#12290;</p></li><li class="listitem"><span class="command"><strong>PermitRootLogin</strong></span><p>&#26159;&#21542;&#20801;&#35768; root &#30331;&#24405;&#12290;&#21487;&#29992;&#20540;&#22914;&#19979;&#65306;"yes"(&#40664;&#35748;) &#34920;&#31034;&#20801;&#35768;&#12290;"no"&#34920;&#31034;&#31105;&#27490;&#12290;"without-password"&#34920;&#31034;&#31105;&#27490;&#20351;&#29992;&#23494;&#30721;&#35748;&#35777;&#30331;&#24405;&#12290;"forced-commands-only"&#34920;&#31034;&#21482;&#26377;&#22312;&#25351;&#23450;&#20102; command &#36873;&#39033;&#30340;&#24773;&#20917;&#19979;&#25165;&#20801;&#35768;&#20351;&#29992;&#20844;&#38053;&#35748;&#35777;&#30331;&#24405;&#12290;&#21516;&#26102;&#20854;&#23427;&#35748;&#35777;&#26041;&#27861;&#20840;&#37096;&#34987;&#31105;&#27490;&#12290;&#36825;&#20010;&#20540;&#24120;&#29992;&#20110;&#20570;&#36828;&#31243;&#22791;&#20221;&#20043;&#31867;&#30340;&#20107;&#24773;&#12290;  </p></li><li class="listitem"><span class="command"><strong>PermitTunnel</strong></span><p>&#26159;&#21542;&#20801;&#35768; tun(4) &#35774;&#22791;&#36716;&#21457;&#12290;&#21487;&#29992;&#20540;&#22914;&#19979;&#65306;"yes", "point-to-point"(layer 3), "ethernet"(layer 2), "no"(&#40664;&#35748;)&#12290;"yes"&#21516;&#26102;&#34164;&#21547;&#30528;"point-to-point"&#21644;"ethernet"&#12290;  </p></li><li class="listitem"><span class="command"><strong>PermitUserEnvironment</strong></span><p>&#25351;&#23450;&#26159;&#21542;&#20801;&#35768; sshd(8) &#22788;&#29702; ~/.ssh/environment &#20197;&#21450; ~/.ssh/authorized_keys &#20013;&#30340; environment= &#36873;&#39033;&#12290;&#40664;&#35748;&#20540;&#26159;"no"&#12290;&#22914;&#26524;&#35774;&#20026;"yes"&#21487;&#33021;&#20250;&#23548;&#33268;&#29992;&#25143;&#26377;&#26426;&#20250;&#20351;&#29992;&#26576;&#20123;&#26426;&#21046;(&#27604;&#22914; LD_PRELOAD)&#32469;&#36807;&#35775;&#38382;&#25511;&#21046;&#65292;&#36896;&#25104;&#23433;&#20840;&#28431;&#27934;&#12290;  </p></li><li class="listitem"><span class="command"><strong>PidFile</strong></span><p>&#25351;&#23450;&#22312;&#21738;&#20010;&#25991;&#20214;&#20013;&#23384;&#25918;SSH&#23432;&#25252;&#36827;&#31243;&#30340;&#36827;&#31243;&#21495;&#65292;&#40664;&#35748;&#20026; /var/run/sshd.pid &#25991;&#20214;&#12290;</p></li><li class="listitem"><span class="command"><strong>Port</strong></span><p>&#25351;&#23450; sshd(8) &#23432;&#25252;&#36827;&#31243;&#30417;&#21548;&#30340;&#31471;&#21475;&#21495;&#65292;&#40664;&#35748;&#20026; 22 &#12290;&#21487;&#20197;&#20351;&#29992;&#22810;&#26465;&#25351;&#20196;&#30417;&#21548;&#22810;&#20010;&#31471;&#21475;&#12290;&#40664;&#35748;&#23558;&#22312;&#26412;&#26426;&#30340;&#25152;&#26377;&#32593;&#32476;&#25509;&#21475;&#19978;&#30417;&#21548;&#65292;&#20294;&#26159;&#21487;&#20197;&#36890;&#36807; ListenAddress &#25351;&#23450;&#21482;&#22312;&#26576;&#20010;&#29305;&#23450;&#30340;&#25509;&#21475;&#19978;&#30417;&#21548;&#12290;</p></li><li class="listitem"><span class="command"><strong>PrintLastLog</strong></span><p>&#25351;&#23450; sshd(8) &#26159;&#21542;&#22312;&#27599;&#19968;&#27425;&#20132;&#20114;&#24335;&#30331;&#24405;&#26102;&#25171;&#21360;&#26368;&#21518;&#19968;&#20301;&#29992;&#25143;&#30340;&#30331;&#24405;&#26102;&#38388;&#12290;&#40664;&#35748;&#20540;&#26159;"yes"&#12290;</p></li><li class="listitem"><span class="command"><strong>PrintMotd</strong></span><p>&#25351;&#23450; sshd(8) &#26159;&#21542;&#22312;&#27599;&#19968;&#27425;&#20132;&#20114;&#24335;&#30331;&#24405;&#26102;&#25171;&#21360; /etc/motd &#25991;&#20214;&#30340;&#20869;&#23481;&#12290;&#40664;&#35748;&#20540;&#26159;"yes"&#12290;</p></li><li class="listitem"><span class="command"><strong>Protocol</strong></span><p>&#25351;&#23450; sshd(8) &#25903;&#25345;&#30340;SSH&#21327;&#35758;&#30340;&#29256;&#26412;&#21495;&#12290;'1'&#21644;'2'&#34920;&#31034;&#20165;&#20165;&#25903;&#25345;SSH-1&#21644;SSH-2&#21327;&#35758;&#12290;"2,1"&#34920;&#31034;&#21516;&#26102;&#25903;&#25345;SSH-1&#21644;SSH-2&#21327;&#35758;&#12290;  </p></li><li class="listitem"><span class="command"><strong>PubkeyAuthentication</strong></span><p>&#26159;&#21542;&#20801;&#35768;&#20844;&#38053;&#35748;&#35777;&#12290;&#20165;&#21487;&#20197;&#29992;&#20110;SSH-2&#12290;&#40664;&#35748;&#20540;&#20026;"yes"&#12290;</p></li><li class="listitem"><span class="command"><strong>RhostsRSAAuthentication</strong></span><p>&#26159;&#21542;&#20351;&#29992;&#24378;&#21487;&#20449;&#20027;&#26426;&#35748;&#35777;(&#36890;&#36807;&#26816;&#26597;&#36828;&#31243;&#20027;&#26426;&#21517;&#21644;&#20851;&#32852;&#30340;&#29992;&#25143;&#21517;&#36827;&#34892;&#35748;&#35777;)&#12290;&#20165;&#29992;&#20110;SSH-1&#12290;&#36825;&#26159;&#36890;&#36807;&#22312;RSA&#35748;&#35777;&#25104;&#21151;&#21518;&#20877;&#26816;&#26597; ~/.rhosts &#25110; /etc/hosts.equiv &#36827;&#34892;&#35748;&#35777;&#30340;&#12290;&#20986;&#20110;&#23433;&#20840;&#32771;&#34385;&#65292;&#24314;&#35758;&#20351;&#29992;&#40664;&#35748;&#20540;"no"&#12290;</p></li><li class="listitem"><span class="command"><strong>RSAAuthentication</strong></span><p>&#26159;&#21542;&#20801;&#35768;&#20351;&#29992;&#32431; RSA &#20844;&#38053;&#35748;&#35777;&#12290;&#20165;&#29992;&#20110;SSH-1&#12290;&#40664;&#35748;&#20540;&#26159;"yes"&#12290;</p></li><li class="listitem"><span class="command"><strong>ServerKeyBits</strong></span><p>&#25351;&#23450;&#20020;&#26102;&#26381;&#21153;&#22120;&#23494;&#38053;&#30340;&#38271;&#24230;&#12290;&#20165;&#29992;&#20110;SSH-1&#12290;&#40664;&#35748;&#20540;&#26159; 768(&#20301;)&#12290;&#26368;&#23567;&#20540;&#26159; 512 &#12290;</p></li><li class="listitem"><span class="command"><strong>StrictModes</strong></span><p>&#25351;&#23450;&#26159;&#21542;&#35201;&#27714; sshd(8) &#22312;&#25509;&#21463;&#36830;&#25509;&#35831;&#27714;&#21069;&#23545;&#29992;&#25143;&#20027;&#30446;&#24405;&#21644;&#30456;&#20851;&#30340;&#37197;&#32622;&#25991;&#20214;&#36827;&#34892;&#23487;&#20027;&#21644;&#26435;&#38480;&#26816;&#26597;&#12290;&#24378;&#28872;&#24314;&#35758;&#20351;&#29992;&#40664;&#35748;&#20540;"yes"&#26469;&#39044;&#38450;&#21487;&#33021;&#20986;&#29616;&#30340;&#20302;&#32423;&#38169;&#35823;&#12290;</p></li><li class="listitem"><span class="command"><strong>Subsystem</strong></span><p>&#37197;&#32622;&#19968;&#20010;&#22806;&#37096;&#23376;&#31995;&#32479;(&#20363;&#22914;&#65292;&#19968;&#20010;&#25991;&#20214;&#20256;&#36755;&#23432;&#25252;&#36827;&#31243;)&#12290;&#20165;&#29992;&#20110;SSH-2&#21327;&#35758;&#12290;&#20540;&#26159;&#19968;&#20010;&#23376;&#31995;&#32479;&#30340;&#21517;&#23383;&#21644;&#23545;&#24212;&#30340;&#21629;&#20196;&#34892;(&#21547;&#36873;&#39033;&#21644;&#21442;&#25968;)&#12290;&#27604;&#22914;"sft /bin/sftp-server"&#12290;</p></li><li class="listitem"><span class="command"><strong>SyslogFacility</strong></span><p>&#25351;&#23450; sshd(8) &#23558;&#26085;&#24535;&#28040;&#24687;&#36890;&#36807;&#21738;&#20010;&#26085;&#24535;&#23376;&#31995;&#32479;(facility)&#21457;&#36865;&#12290;&#26377;&#25928;&#20540;&#26159;&#65306;DAEMON, USER, AUTH(&#40664;&#35748;), LOCAL0, LOCAL1, LOCAL2, LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7  </p></li><li class="listitem"><span class="command"><strong>TCPKeepAlive</strong></span><p>&#25351;&#23450;&#31995;&#32479;&#26159;&#21542;&#21521;&#23458;&#25143;&#31471;&#21457;&#36865; TCP keepalive &#28040;&#24687;&#12290;&#40664;&#35748;&#20540;&#26159;"yes"&#12290;&#36825;&#31181;&#28040;&#24687;&#21487;&#20197;&#26816;&#27979;&#21040;&#27515;&#36830;&#25509;&#12289;&#36830;&#25509;&#19981;&#24403;&#20851;&#38381;&#12289;&#23458;&#25143;&#31471;&#23849;&#28291;&#31561;&#24322;&#24120;&#12290;&#21487;&#20197;&#35774;&#20026;"no"&#20851;&#38381;&#36825;&#20010;&#29305;&#24615;&#12290;  </p></li><li class="listitem"><span class="command"><strong>UseDNS</strong></span><p>&#25351;&#23450; sshd(8) &#26159;&#21542;&#24212;&#35813;&#23545;&#36828;&#31243;&#20027;&#26426;&#21517;&#36827;&#34892;&#21453;&#21521;&#35299;&#26512;&#65292;&#20197;&#26816;&#26597;&#27492;&#20027;&#26426;&#21517;&#26159;&#21542;&#19982;&#20854;IP&#22320;&#22336;&#30495;&#23454;&#23545;&#24212;&#12290;&#40664;&#35748;&#20540;&#20026;"yes"&#12290;</p></li><li class="listitem"><span class="command"><strong>UseLogin</strong></span><p>&#26159;&#21542;&#22312;&#20132;&#20114;&#24335;&#20250;&#35805;&#30340;&#30331;&#24405;&#36807;&#31243;&#20013;&#20351;&#29992; login(1) &#12290;&#40664;&#35748;&#20540;&#26159;"no"&#12290;&#22914;&#26524;&#24320;&#21551;&#27492;&#25351;&#20196;&#65292;&#37027;&#20040; X11Forwarding &#23558;&#20250;&#34987;&#31105;&#27490;&#65292;&#22240;&#20026; login(1) &#19981;&#30693;&#36947;&#22914;&#20309;&#22788;&#29702; xauth(1) cookies &#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;login(1) &#26159;&#31105;&#27490;&#29992;&#20110;&#36828;&#31243;&#25191;&#34892;&#21629;&#20196;&#30340;&#12290;&#22914;&#26524;&#25351;&#23450;&#20102; UsePrivilegeSeparation &#65292;&#37027;&#20040;&#23427;&#23558;&#22312;&#35748;&#35777;&#23436;&#25104;&#21518;&#34987;&#31105;&#29992;&#12290;  </p></li><li class="listitem"><span class="command"><strong>UsePrivilegeSeparation</strong></span><p>&#26159;&#21542;&#35753; sshd(8) &#36890;&#36807;&#21019;&#24314;&#38750;&#29305;&#26435;&#23376;&#36827;&#31243;&#22788;&#29702;&#25509;&#20837;&#35831;&#27714;&#30340;&#26041;&#27861;&#26469;&#36827;&#34892;&#26435;&#38480;&#20998;&#31163;&#12290;&#40664;&#35748;&#20540;&#26159;"yes"&#12290;&#35748;&#35777;&#25104;&#21151;&#21518;&#65292;&#23558;&#20197;&#35813;&#35748;&#35777;&#29992;&#25143;&#30340;&#36523;&#20221;&#21019;&#24314;&#21478;&#19968;&#20010;&#23376;&#36827;&#31243;&#12290;&#36825;&#26679;&#20570;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#38450;&#27490;&#36890;&#36807;&#26377;&#32570;&#38519;&#30340;&#23376;&#36827;&#31243;&#25552;&#21319;&#26435;&#38480;&#65292;&#20174;&#32780;&#20351;&#31995;&#32479;&#26356;&#21152;&#23433;&#20840;&#12290;  </p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e436"></a>3.2.&nbsp;&#20351;&#29992;&#23494;&#38053;&#30331;&#38470;</h3></div></div></div><p>&#19968;&#31181;&#26356;&#20026;&#20415;&#25463;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;&#23494;&#38053;&#30331;&#38470;&#12290;&#32593;&#32476;&#20013;&#26377;&#19968;&#21488;SSH-Server&#65288;192.168.31.66&#65289;&#12289;&#19968;&#21488;SSH-Client&#65292;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;</p><div class="figure"><a name="d0e441"></a><p class="title"><b>&#22270;&nbsp;1.&nbsp;&#32593;&#32476;&#31034;&#24847;&#22270;</b></p><div class="figure-contents"><div><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="200"><tr><td><img src="images/env.png" width="200" alt="&#32593;&#32476;&#31034;&#24847;&#22270;"></td></tr></table></div></div></div><br class="figure-break"><p>&#25105;&#20204;&#35201;&#20174;SSH-CLient&#30331;&#38470;&#21040;SSH-Server&#19978;&#12290;&#22312;SSH-Server&#26377;&#19968;&#20010;&#29992;&#25143;bob&#65292;&#22312;SSH-CLient&#20063;&#24314;&#31435;&#19968;&#20010;&#29992;&#25143;bob&#65288;&#24403;&#28982;&#20063;&#21487;&#20197;&#20351;&#29992;&#20854;&#20182;&#30340;&#29992;&#25143;&#65289;&#65292;&#27493;&#39588;&#22914;&#19979;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>ssh-keygen</strong></span><p>&#22312;SSH-Client&#19978;&#20351;&#29992;&#22914;&#19979;&#21629;&#20196;&#21629;&#20196;&#20135;&#29983;&#23494;&#38053;&#23545;&#65306;</p><div class="blockquote"><blockquote class="blockquote"><span class="command"><strong>ssh-keygen</strong></span></blockquote></div><p>&#21629;&#20196;&#25191;&#34892;&#21518;&#20250;&#26377;&#31867;&#20284;&#22914;&#19979;&#30340;&#21453;&#39304;&#65306;</p><pre class="screen">bob@SSH-Client:~$ ssh-keygen 
Generating public/private rsa key pair.
Enter file in which to save the key (/home/bob/.ssh/id_rsa): 
Created directory '/home/bob/.ssh'.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/bob/.ssh/id_rsa
Your public key has been saved in /home/bob/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:u8bm0IR3amluHGnu2XE7iZBliSJepPDEeCOyGBDArC0 bob@SSH-Client
The key's randomart image is:
+---[RSA 3072]----+
|O. o             |
|oo+ = .          |
|o= * +   . .     |
|E . + o.. +      |
| . . o..S=.      |
|    .  +*=       |
|      .=Bo....   |
|       =B+.oo.   |
|       ** . ..   |
+----[SHA256]-----+
bob@SSH-Client:~$ </pre><p>&#36825;&#26102;&#65292;&#25105;&#20204;&#22312;SSH-Client&#30340;<code class="filename">/home/bob/.ssh/</code>&#30446;&#24405;&#19979;&#20250;&#30475;&#21040;&#20004;&#20010;&#25991;&#20214;&#65306;<code class="filename">id_rsa</code>&#21644;<code class="filename">id_rsa.pub</code>&#12290;&#20854;&#20013;&#65292;<code class="filename">id_rsa</code>&#26159;&#31169;&#38053;&#25991;&#20214;&#12289;<code class="filename">id_rsa.pub</code>&#26159;&#20844;&#38053;&#25991;&#20214;&#12290;</p></li><li class="listitem"><span class="command"><strong>ssh-copy-id</strong></span><p>&#20351;&#29992; &#22914;&#19979;&#21629;&#20196;&#21629;&#20196;&#23558;&#20844;&#38053;&#22797;&#21046;&#21040;SSH-Server&#20013;</p><div class="blockquote"><blockquote class="blockquote"><span class="command"><strong>ssh-copy-id -i .ssh/id_rsa.pub bob@192.168.31.66</strong></span></blockquote></div><pre class="screen">bob@SSH-Client:~$ ssh-copy-id -i .ssh/id_rsa.pub bob@192.168.31.66
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: ".ssh/id_rsa.pub"
The authenticity of host '192.168.31.66 (192.168.31.66)' can't be established.
ED25519 key fingerprint is SHA256:eoJFz2cx/XsJQqRxPiu5RGVtZ6TAy0tBXeJEdFc+bAo.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any 
                            that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now 
                            it is to install the new keys
bob@192.168.31.66's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'bob@192.168.31.66'"
and check to make sure that only the key(s) you wanted were added.

bob@SSH-Client:~$ 
</pre><p><span class="command"><strong>ssh-copy-id</strong></span>&#23558;&#20844;&#38053;&#20889;&#21040;&#36828;&#31243;&#26426;&#22120;&#30340; <code class="filename">~/.ssh/authorized_key</code>&#25991;&#20214;&#20013;</p></li><li class="listitem"><span class="command"><strong>/etc/init.d/ssh restart</strong></span><p>&#22312;SSH-Server&#19978;&#37325;&#26032;&#21551;&#21160;ssh&#31995;&#32479;&#65306;</p><div class="blockquote"><blockquote class="blockquote"><span class="command"><strong>/etc/init.d/ssh restart</strong></span></blockquote></div></li><li class="listitem"><span class="command"><strong>ssh&#30331;&#38470;</strong></span><p>&#25509;&#19979;&#26469;&#20174;SSH-CLient&#30452;&#25509;&#30331;&#38470;&#30340;SSH-Server&#65292;&#22312;SSH-Client&#25191;&#34892;&#22914;&#19979;&#21629;&#20196;&#65306;</p><div class="blockquote"><blockquote class="blockquote"><span class="command"><strong>ssh  bob@192.168.31.66</strong></span></blockquote></div></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e510"></a>3.3.&nbsp;&#20351;&#29992;&#23433;&#20840;&#36719;&#20214;</h3></div></div></div><p>sshguard</p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">2.&nbsp;&#30456;&#20851;&#26085;&#24535;&#35299;&#26512;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="themes/default/navig/home.png" alt="&#36215;&#22987;&#39029;"></a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>