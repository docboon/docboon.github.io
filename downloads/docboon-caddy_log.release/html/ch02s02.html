<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>2.&nbsp;&#36755;&#20986;&#65288;Output modules&#65289;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="Caddy&#26085;&#24535;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="ch02.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#37197;&#32622;(Caddyfile&#20013;&#26085;&#24535;&#30340;&#37197;&#32622;)"><link rel="prev" href="ch02.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#37197;&#32622;(Caddyfile&#20013;&#26085;&#24535;&#30340;&#37197;&#32622;)"><link rel="next" href="ch02s03.html" title="3.&nbsp;&#26684;&#24335;&#65288;Format modules&#65289;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;&#36755;&#20986;&#65288;Output modules&#65289;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#37197;&#32622;(Caddyfile&#20013;&#26085;&#24535;&#30340;&#37197;&#32622;)</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s03.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr></table></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e414"></a>2.&nbsp;&#36755;&#20986;&#65288;Output modules&#65289;</h2></div></div></div><p><span class="command"><strong>output</strong></span>&#25351;&#20196;&#35753;&#25105;&#20204;&#23450;&#20041;&#23558;&#26085;&#24535;&#36755;&#20986;&#21040;&#20160;&#20040;&#22320;&#26041;&#65292;&#19968;&#20849;&#26377;6&#20010;&#37197;&#32622;&#36873;&#39033;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>stderr</strong></span><p>&#36825;&#20010;&#36873;&#39033;&#26159;&#23558;&#26085;&#24535;&#30452;&#25509;&#36755;&#20986;&#21040;&#25511;&#21046;&#21488;&#65288;console&#65289;&#65292;&#20063;&#26159;caddy&#40664;&#35748;&#20351;&#29992;&#30340;&#36873;&#39033;&#12290;</p><pre class="screen">output stderr</pre>different
        </li><li class="listitem"><span class="command"><strong>stdout</strong></span><p>&#23558;&#26085;&#24535;&#30452;&#25509;&#36755;&#20986;&#21040;&#25511;&#21046;&#21488;&#19978;&#12290;</p><pre class="screen">output stdout</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top">&#31508;&#32773;&#35797;&#39564;&#30340;&#32467;&#26524;&#65292;&#26412;&#20197;&#20026;<span class="command"><strong>stderr</strong></span>&#21482;&#26159;&#22312;&#25511;&#21046;&#21488;&#36755;&#20986;&#38169;&#35823;&#26085;&#24535;&#65292;&#20294;<span class="command"><strong>stderr</strong></span>&#21644;<span class="command"><strong>stdout</strong></span>&#20284;&#20046;&#36755;&#20986;&#26085;&#24535;&#30340;&#32467;&#26524;&#26159;&#19968;&#26679;&#30340;&#65292;&#37117;&#26159;&#22312;console&#21488;&#19978;&#36755;&#20986;&#65292;&#20063;&#27809;&#30475;&#20986;&#20160;&#20040;&#24046;&#21035;&#12290;</td></tr></table></div></li><li class="listitem"><span class="command"><strong>discard</strong></span><p>&#19981;&#22312;&#20219;&#20309;&#22320;&#26041;&#36755;&#20986;&#26085;&#24535;&#20449;&#24687;&#12290;</p><pre class="screen">output discard</pre></li><li class="listitem"><span class="command"><strong>file</strong></span><p>&#25226;&#26085;&#24535;&#35760;&#24405;&#21040;&#25991;&#20214;&#20013;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#20026;&#38450;&#27490;&#30913;&#30424;&#32791;&#23613;&#65292;&#21644;&#20854;&#20182;&#31995;&#32479;&#26085;&#24535;&#19968;&#26679;&#65292;caddy&#30340;&#26032;&#26085;&#24535;&#20250;&#37319;&#29992;&#26576;&#31181;&#26426;&#21046;&#35206;&#30422;&#32769;&#30340;&#26085;&#24535;&#65288;&#28378;&#21160;&#26426;&#21046;&#65289;&#65292;&#26377;&#20960;&#20010;&#36873;&#39033;&#26469;&#37197;&#32622;&#65306;</p><pre class="screen">output file &lt;filename&gt; {
	roll_disabled
	roll_size     &lt;size&gt;
	roll_keep     &lt;num&gt;
	roll_keep_for &lt;days&gt;
}</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><span class="command"><strong>filename</strong></span>&#65306;&#25351;&#23450;&#26085;&#24535;&#36755;&#20986;&#21040;&#21738;&#20010;&#25991;&#20214;&#65292;&#20363;&#22914;&#65306;<code class="filename">/var/log/caddy/access.log</code></li><li class="listitem"><span class="command"><strong>roll_disabled</strong></span>&#65306;&#31105;&#29992;&#26085;&#24535;&#28378;&#21160;&#12290;&#36825;&#21487;&#33021;&#20250;&#23548;&#33268;&#30913;&#30424;&#31354;&#38388;&#32791;&#23613;&#65292;&#22240;&#27492;&#21482;&#26377;&#22312;&#26377;&#20854;&#20182;&#26041;&#24335;&#32500;&#25252;&#26085;&#24535;&#25991;&#20214;&#26102;&#25165;&#20351;&#29992;&#27492;&#26041;&#27861;&#12290;</li><li class="listitem"><span class="command"><strong>roll_size</strong></span>&#65306;&#28378;&#21160;&#26085;&#24535;&#25991;&#20214;&#30340;&#22823;&#23567;&#65292;&#40664;&#35748;&#20540;&#26159;100MB&#12290;</li><li class="listitem"><span class="command"><strong>roll_keep</strong></span>&#65306;&#22312;&#21024;&#38500;&#26087;&#26085;&#24535;&#25991;&#20214;&#20043;&#21069;&#25152;&#20445;&#23384;&#30340;&#26085;&#24535;&#25991;&#20214;&#30340;&#25968;&#37327;&#65292;&#40664;&#35748;&#20540;&#26159;10&#12290;</li><li class="listitem"><span class="command"><strong>roll_keep_for</strong></span>&#65306;is how long to keep rolled files as a duration string. The current implementation supports day resolution; fractional values are rounded up to the next whole day. For example, 36h (1.5 days) is rounded up to 48h (2 days). Default: 2160h (90 days)</li></ol></div></li><li class="listitem"><span class="command"><strong>net</strong></span><p>&#23558;&#26085;&#24535;&#36755;&#20986;&#21040;&#32593;&#32476;&#20013;&#30340;&#20854;&#20182;&#26085;&#24535;&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#26085;&#24535;&#26381;&#21153;&#22120;&#19981;&#21487;&#29992;&#65292;&#37027;caddy&#20250;&#23558;&#26085;&#24535;&#36755;&#20986;&#21040;<span class="command"><strong>stderr</strong></span>&#65292;&#30452;&#21040;&#26085;&#24535;&#26381;&#21153;&#22120;&#24674;&#22797;&#12290;</p><pre class="screen">output net &lt;address&gt; {
	dial_timeout &lt;duration&gt;
}</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><span class="command"><strong>address</strong></span>&#65306;&#26377;&#20004;&#20010;&#37096;&#20998;&#32452;&#25104;<span class="command"><strong>protocol/address</strong></span>&#65292;<span class="command"><strong>protocol</strong></span>&#25351;&#24471;&#26159;&#21327;&#35758;&#65292;&#40664;&#35748;&#20026;tcp&#65292;<span class="command"><strong>address</strong></span>&#25351;&#24471;&#26159;&#22320;&#22336;&#65292;&#22914;192.168.1.10:514&#12290;
              <p>&#20363;&#22914;&#65292;&#25105;&#20204;&#35201;&#25226;&#26085;&#24535;&#35760;&#24405;&#21040;&#26085;&#24535;&#26381;&#21153;&#22120;192.168.1.10&#65292;&#20854;&#31471;&#21475;&#26159;514&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#30340;&#25351;&#20196;&#65306;</p><pre class="screen">log {
  output net tcp/127.0.0.1:514
}
</pre></li><li class="listitem"><span class="command"><strong>dial_timeout</strong></span>&#65306;&#25104;&#21151;&#22320;&#20889;&#21040;&#26085;&#24535;&#26381;&#21153;&#22120;&#20013;&#21487;&#20197;&#31561;&#24453;&#30340;&#26102;&#38388;&#12290;
              <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top"><span class="command"><strong>dial_timeout</strong></span>&#20284;&#20046;&#24212;&#35813;&#26377;&#20010;&#40664;&#35748;&#20540;&#65292;&#20294;caddy&#30340;&#23448;&#26041;&#25991;&#26723;&#24182;&#27809;&#26377;&#32473;&#20986;&#65292;&#26597;&#30475;caddy&#30340;&#28304;&#20195;&#30721;&#65292;&#22312;&#26085;&#24535;&#27169;&#22359;&#25991;&#20214;<code class="filename">modules/logging/netwriter.go</code>&#20013;&#20063;&#27809;&#26377;&#25214;&#21040;&#30456;&#24212;&#30340;&#35774;&#32622;&#12290;</td></tr></table></div></li></ol></div></li></ol></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html"><img src="themes/default/navig/up.png" alt="&#19978;&#19968;&#32423;"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s03.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#37197;&#32622;(Caddyfile&#20013;&#26085;&#24535;&#30340;&#37197;&#32622;)&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="themes/default/navig/home.png" alt="&#36215;&#22987;&#39029;"></a></td><td width="40%" align="right" valign="top">&nbsp;3.&nbsp;&#26684;&#24335;&#65288;Format modules&#65289;</td></tr></table></div></body></html>