<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="Caddy&#20351;&#29992;&#25163;&#20876;"><link rel="up" href="index.html" title="Caddy&#20351;&#29992;&#25163;&#20876;"><link rel="prev" href="ch01s03.html" title="3.&nbsp;caddy&#30340;&#37197;&#32622;&#26041;&#24335;"><link rel="next" href="ch02s02.html" title="2.&nbsp;Caddyfile&#37197;&#32622;&#25991;&#20214;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s03.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s02.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr></table></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d0e309"></a>&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;</h1></div></div></div><div class="toc"><p><b>&#30446;&#24405;</b></p><dl class="toc"><dt><span class="sect1"><a href="ch02.html#d0e350">1. &#36816;&#34892;&#23432;&#25252;&#36827;&#31243;&#65288;Run the daemon&#65289;</a></span></dt><dt><span class="sect1"><a href="ch02s02.html">2. Caddyfile&#37197;&#32622;&#25991;&#20214;</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02s02.html#d0e415">2.1. Hello World! ( Caddyfile )</a></span></dt><dt><span class="sect2"><a href="ch02s02.html#d0e457">2.2. &#37197;&#32622;&#22810;&#31449;&#28857; ( Caddyfile &amp; API )</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch02s03.html">3. &#23581;&#35797;&#20351;&#29992;caddyAPI &amp; JSON</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02s03.html#d0e480">3.1. Hello World! ( Heredoc )</a></span></dt><dt><span class="sect2"><a href="ch02s03.html#d0e506">3.2. Hello World! ( JSON )</a></span></dt><dt><span class="sect2"><a href="ch02s03.html#d0e538">3.3. &#37197;&#32622;&#22810;&#31449;&#28857; ( JSON &amp; API)</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch02s04.html">4. &#37197;&#32622;&#27979;&#35797;&#21644;adapter</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02s04.html#d0e578">4.1. &#23545;&#37197;&#32622;&#36827;&#34892;&#27979;&#35797;&#65288;Test config&#65289;</a></span></dt><dt><span class="sect2"><a href="ch02s04.html#d0e597">4.2. adapter</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch02s05.html">5. JSON vs. Caddyfile</a></span></dt><dt><span class="sect1"><a href="ch02s06.html">6. API vs. Config files</a></span></dt><dt><span class="sect1"><a href="ch02s07.html">7. &#38745;&#24577;&#25991;&#20214;&#26381;&#21153;&#22120;</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02s07.html#d0e743">7.1. command line</a></span></dt><dt><span class="sect2"><a href="ch02s07.html#d0e784">7.2. Caddyfile</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch02s08.html">8. &#21453;&#21521;&#20195;&#29702;</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02s08.html#d0e815">8.1. command line</a></span></dt><dt><span class="sect2"><a href="ch02s08.html#d0e827">8.2. Caddyfile</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch02s09.html">9. HTTPS</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch02s09.html#d0e850">9.1. Caddyfile</a></span></dt><dt><span class="sect2"><a href="ch02s09.html#d0e881">9.2. &#20351;&#29992;&#21629;&#20196;</a></span></dt></dl></dd></dl></div><p>&#20026;&#20102;&#33021;&#26356;&#28165;&#26224;&#22320;&#25551;&#36848;&#65292;&#25105;&#20204;&#22312;&#23616;&#22495;&#32593;&#20013;&#35774;&#31435;&#19968;&#21488;caddy&#26381;&#21153;&#22120;&#65292;&#25105;&#20204;&#31216;&#20026;<span class="emphasis"><em>Server</em></span>&#65292;&#20854;&#20869;&#32593;IP&#22320;&#22336;&#26159;192.168.31.2/24&#65292;&#22806;&#32593;IP&#22320;&#22336;&#26159;192.168.1.2/24&#12290;&#25105;&#20204;&#22312;&#20854;&#19978;&#23433;&#35013;Debian Linux&#65288;V12&#65289;&#12290;</p><div class="figure"><a name="d0e317"></a><p class="title"><b>&#22270;&nbsp;2.1.&nbsp;caddy&#26381;&#21153;&#22120;&#32593;&#32476;&#25299;&#25169;&#22270;</b></p><div class="figure-contents"><div><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="180"><tr><td><img src="images/env.png" width="180" alt="caddy&#26381;&#21153;&#22120;&#32593;&#32476;&#25299;&#25169;&#22270;"></td></tr></table></div></div></div><br class="figure-break"><p>&#21516;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;&#23458;&#25143;&#31471;&#65288;&#23458;&#25143;&#31471;&#20351;&#29992;&#20102;Ubuntu&#26700;&#38754;&#31995;&#32479;&#65289;&#21644;caddy server&#31471;&#23433;&#35013;&#20004;&#20010;&#24037;&#20855;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="emphasis"><em>curl</em></span><p><span class="command"><strong>curl</strong></span>&#65292;&#21363;client-URL&#65292;&#21487;&#20197;&#35748;&#20026;&#26159;&#19968;&#20010;&#21629;&#20196;&#34892;&#30340;&#27983;&#35272;&#22120;&#65292;&#22312;Debian/Ubuntu&#19979;&#20351;&#29992;<span class="command"><strong>apt-get install curl</strong></span>&#21629;&#20196;&#26469;&#23433;&#35013;&#12290;&#23427;&#30340;&#23448;&#26041;&#31449;&#28857;&#26159;<a class="link" href="https://curl.se/" target="_top">https://curl.se/</a></p></li><li class="listitem"><span class="emphasis"><em>jq</em></span><p><span class="command"><strong>jq</strong></span> &#26159;&#19968;&#20010;&#22522;&#20110;&#21629;&#20196;&#34892;&#30340;&#12289;&#36731;&#37327;&#32423;JSON&#25991;&#20214;&#22788;&#29702;&#24037;&#20855;&#65292;caddy&#30340;&#21407;&#29983;&#37197;&#32622;&#25991;&#20214;&#26159;JSON&#25991;&#20214;&#65292;&#25105;&#20204;&#38656;&#35201;&#29992;<span class="command"><strong>jq</strong></span>&#21629;&#20196;&#26469;&#23558;&#20854;&#26684;&#24335;&#21270;&#65292;&#20197;&#20415;&#20110;&#38405;&#35835;&#12290;&#22312;Debian&#25110;Ubuntu&#19979;&#21487;&#36890;&#36807;<span class="command"><strong>apt-get install jq</strong></span>&#26469;&#23433;&#35013;&#12290;&#20851;&#20110;&#20854;&#26356;&#22810;&#20869;&#23481;&#35831;&#35775;&#38382;&#65306;<a class="link" href="https://stedolan.github.io/jq/" target="_top">https://stedolan.github.io/jq/</a>&#12290;</p></li></ol></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e350"></a>1.&nbsp;&#36816;&#34892;&#23432;&#25252;&#36827;&#31243;&#65288;Run the daemon&#65289;</h2></div></div></div><p>&#22312;&#32456;&#31471;&#36755;&#20837;<span class="command"><strong>caddy</strong></span>&#21629;&#20196;&#65292;&#20250;&#26174;&#31034;help&#20449;&#24687;&#12290;&#22914;&#26524;&#24819;&#35753;caddy&#20316;&#20026;&#23432;&#25252;&#36827;&#31243;&#26469;&#36816;&#34892;&#65292;&#26377;&#20004;&#20010;&#23376;&#21629;&#20196;&#21487;&#20197;&#20351;&#29992;&#65306;<span class="command"><strong>run</strong></span>&#21644;<span class="command"><strong>start</strong></span>&#12290;&#22312;&#32456;&#31471;&#20013;&#36755;&#20837;<span class="command"><strong>caddy run</strong></span>&#25110;<span class="command"><strong>caddy start</strong></span>&#21363;&#21487;&#12290;<span class="command"><strong>run</strong></span>&#21644;<span class="command"><strong>start</strong></span>&#30340;&#21306;&#21035;&#26159;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>run</strong></span>&#65306;&#24320;&#21551;caddy&#36827;&#31243;&#65292;&#21487;&#20197;&#38543;&#26102;&#20351;&#29992;&#65288;Ctrl+C&#65289;&#25110;&#20851;&#38381;&#32456;&#31471;&#26469;&#32467;&#26463;&#20854;&#36816;&#34892;&#12290;</li><li class="listitem"><span class="command"><strong>start</strong></span>&#65306;&#24320;&#21551;caddy&#36827;&#31243;&#65292;&#24182;&#22312;&#21518;&#21488;&#36816;&#34892;&#12290;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy sotp</strong></span>&#26469;&#32467;&#26463;&#20854;&#36816;&#34892;&#12290;</li></ol></div><p>&#22312;&#37197;&#32622;&#25991;&#20214;&#20026;&#31354;&#30340;&#24773;&#20917;&#19979;&#65292;&#36816;&#34892;<span class="command"><strong>caddy run</strong></span>&#25110;<span class="command"><strong>caddy start</strong></span>&#20043;&#21518;&#65292;&#31995;&#32479;&#20250;&#24320;&#21551;&#19968;&#20010;&#26412;&#22320;&#30340;2019&#31471;&#21475;&#65292;&#36825;&#20010;&#31471;&#21475;&#23601;&#26159;caddy&#30340;API&#31649;&#29702;&#25509;&#21475;&#12290;&#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#25509;&#21475;&#23545;caddy&#23436;&#25104;&#24456;&#22810;&#30340;&#25805;&#20316;&#12290;</p><p>&#19979;&#38754;&#30340;&#20869;&#23481;&#23601;&#26159;&#20351;&#29992;<span class="command"><strong>caddy start</strong></span>&#21551;&#21160;&#31995;&#32479;&#20043;&#21518;&#30340;&#23631;&#24149;&#20869;&#23481;&#65292;&#36890;&#36807;&#20351;&#29992;<span class="command"><strong>netstat -ptuln</strong></span>&#21629;&#20196;&#65292;&#21487;&#20197;&#30475;&#21040;&#65292;caddy&#24320;&#21551;&#20102;&#26412;&#22320;&#30340;2019&#31649;&#29702;&#31471;&#21475;&#65306;</p><pre class="screen">root@lognovel:~# caddy start
2021/11/08 05:46:38.499	INFO	admin	admin endpoint started	{"address": "tcp/localhost:2019", \
         "enforce_origin": false, "origins": ["localhost:2019", "[::1]:2019", "127.0.0.1:2019"]}
2021/11/08 05:46:38.499	INFO	serving initial configuration
Successfully started Caddy (pid=1850) - Caddy is running in the background
root@lognovel:~# netstat -ptuln
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address    State       PID/Program name    
tcp        0      0 127.0.0.1:2019          0.0.0.0:*          LISTEN      1850/caddy          
... ...</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="themes/default/admon/note.png"></td><th align="left">&#27880;&#24847;</th></tr><tr><td align="left" valign="top">caddy&#25152;&#21551;&#21160;&#30340;2019&#31471;&#21475;L&#24182;&#38750;&#25105;&#20204;&#30340;web&#31449;&#28857;&#65292;&#32780;&#26159;&#8220;&#31649;&#29702;&#31471;&#28857;&#65288;administration endpoint&#65289;&#8221;&#65292;&#20063;&#23601;&#26159;caddy&#30340;API&#12290;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#36816;&#34892;&#22312;&#26412;&#26426;&#30340;2019&#31471;&#21475;&#65292;&#24182;&#19988;&#21482;&#20801;&#35768;&#26412;&#26426;&#35775;&#38382;&#12290;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>curl localhost:2019/config/</strong></span>&#21629;&#20196;&#26469;&#26597;&#30475;&#31995;&#32479;&#37197;&#32622;&#12290;</td></tr></table></div></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s03.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s02.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr><tr><td width="40%" align="left" valign="top">3.&nbsp;caddy&#30340;&#37197;&#32622;&#26041;&#24335;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="themes/default/navig/home.png" alt="&#36215;&#22987;&#39029;"></a></td><td width="40%" align="right" valign="top">&nbsp;2.&nbsp;Caddyfile&#37197;&#32622;&#25991;&#20214;</td></tr></table></div></body></html>