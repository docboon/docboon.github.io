<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>3.&nbsp;&#26684;&#24335;&#65288;Format modules&#65289;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="Caddy&#26085;&#24535;&#21442;&#32771;&#25163;&#20876;"><link rel="up" href="ch02.html" title="&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#37197;&#32622;(Caddyfile&#20013;&#26085;&#24535;&#30340;&#37197;&#32622;)"><link rel="prev" href="ch02s02.html" title="2.&nbsp;&#36755;&#20986;&#65288;Output modules&#65289;"><link rel="next" href="ch03.html" title="&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#37197;&#32622;&#26696;&#20363;&#21450;&#26085;&#24535;&#35299;&#26512;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.&nbsp;&#26684;&#24335;&#65288;Format modules&#65289;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#37197;&#32622;(Caddyfile&#20013;&#26085;&#24535;&#30340;&#37197;&#32622;)</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr></table></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e526"></a>3.&nbsp;&#26684;&#24335;&#65288;Format modules&#65289;</h2></div></div></div><p><span class="command"><strong>format</strong></span>&#25351;&#20196;&#21487;&#20197;&#35753;&#25105;&#20204;&#25351;&#23450;&#26085;&#24535;&#30340;&#26684;&#24335;&#65292;&#21363;&#26085;&#24535;&#20449;&#24687;&#22914;&#20309;&#26469;&#23553;&#35013;&#12290;&#36825;&#20010;&#25351;&#20196;&#21253;&#21547;&#22312;<span class="command"><strong>log</strong></span>&#37324;&#38754;&#65292;</p><pre class="screen">log {
  format json
}</pre><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e538"></a>3.1.&nbsp;&#26684;&#24335;&#31867;&#22411;</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>console</strong></span><p>&#20351;&#29992;&#22914;&#19979;&#21629;&#20196;&#25351;&#23450;<span class="command"><strong>console</strong></span></p><pre class="screen">format console</pre><p>&#36825;&#31181;&#26041;&#24335;&#30340;&#26085;&#24535;&#26684;&#24335;&#30475;&#36215;&#26469;&#26159;&#28151;&#21512;&#20102;&#25991;&#26412;&#19982;JSON&#20004;&#31181;&#26684;&#24335;&#65292;&#20063;&#26159;caddy&#40664;&#35748;&#20351;&#29992;&#30340;&#26085;&#24535;&#26684;&#24335;&#12290;&#27599;&#34892;&#26085;&#24535;&#30340;&#21069;&#38754;&#26159;&#20197;&#26102;&#38388;&#25139;&#20026;&#39318;&#30340;4&#20010;&#23383;&#27573;&#65292;&#21518;&#38754;&#26159;&#19968;&#27573;JSON&#26684;&#24335;&#30340;&#26085;&#24535;&#20449;&#24687;&#65292;&#22914;&#19979;&#65306;</p><pre class="screen">2021/11/26 06:32:43.823	info	http.log.access.log0	handled request	
{
  "request": {
    "remote_addr": "192.168.31.56:42292",
    "proto": "HTTP/2.0",
    "method": "GET",
    "host": "192.168.31.9",
    "uri": "/index.html",
    "headers": {
      "Accept-Language": ["zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2" ],
      "Accept-Encoding": ["gzip, deflate, br"],
      "Upgrade-Insecure-Requests": [ "1" ],
      "Te": ["trailers"],
      "User-Agent": [ "Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0" ],
      "Accept": ["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"]
    },
    "tls": {
      "resumed": false,
      "version": 772,
      "cipher_suite": 4865,
      "proto": "h2",
      "proto_mutual": true,
      "server_name": ""
    }
  },
  "common_log":"192.168.31.56 - -[26/Nov/2021:06:32:43 +0000] \"GET /index.html HTTP/2.0\" 200 7",
  "user_id": "",
  "duration": 0.005788781,
  "size": 7,
  "status": 200,
  "resp_headers": {
    "Server": ["Caddy"],
    "Etag": ["\"r2yh597\""],
    "Content-Type": ["text/html; charset=utf-8"],
    "Last-Modified": ["Mon, 22 Nov 2021 04:15:09 GMT"],
    "Accept-Ranges": ["bytes"],
    "Content-Length": ["7"]
  }
}</pre><p>&#21069;&#38754;&#30340;4&#20010;&#23383;&#27573;&#26159;&#65306;<code class="option">level</code>&#12289;<code class="option">time</code>&#12289;<code class="option">name</code>&#12289;<code class="option">msg</code>&#12290;</p></li><li class="listitem"><span class="command"><strong>json</strong></span><p><span class="command"><strong>json</strong></span>&#25351;&#20196;&#25351;&#23450;&#26085;&#24535;&#20351;&#29992;json&#26684;&#24335;&#12290;&#36825;&#20250;&#25351;&#23450;&#27599;&#26465;&#26085;&#24535;&#26465;&#30446;&#37117;&#20351;&#29992;json&#26684;&#24335;</p><pre class="screen">format json</pre><p>&#21487;&#20197;&#20351;&#29992;&#21629;&#20196;<span class="command"><strong>cat access.log | jq</strong></span>&#26469;&#26684;&#24335;&#21270;&#26085;&#24535;&#20449;&#24687;&#12290;</p></li><li class="listitem"><span class="command"><strong>single_field</strong></span><p>&#36825;&#26159;&#19968;&#20010;&#34987;&#24323;&#29992;&#12289;&#24182;&#19988;&#22312;&#26410;&#26469;&#30340;&#26576;&#19968;&#20010;&#29256;&#26412;&#20013;&#23601;&#20250;&#34987;&#31227;&#38500;&#30340;&#26684;&#24335;&#12290;</p><pre class="screen">format single_field &lt;field_name&gt;</pre><p>&#22914;&#26524;&#25105;&#20204;&#24819;&#35201;<span class="command"><strong>common_log</strong></span>&#26684;&#24335;&#30340;&#26085;&#24535;&#65292;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#21629;&#20196;&#65306;<span class="command"><strong>format single_field common_log</strong></span>&#12290;&#22312;caddy&#30340;&#25991;&#26723;&#20013;&#65292;&#36825;&#20010;&#21151;&#33021;&#24050;&#32463;&#34987;<span class="emphasis"><em>format-encoder</em></span>&#26367;&#20195;&#12290;<a class="link" href="https://github.com/caddyserver/format-encoder" target="_top">https://github.com/caddyserver/format-encoder</a></p></li><li class="listitem"><span class="command"><strong>filter</strong></span><p><span class="command"><strong>filter</strong></span>&#26159;&#19968;&#31181;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#23545;&#26085;&#24535;&#36827;&#34892;&#8220;&#31579;&#36873;&#8221;&#30340;&#26684;&#24335;&#65292;&#23427;&#38656;&#35201;&#23558;<span class="command"><strong>json</strong></span>&#25110;<span class="command"><strong>console</strong></span>&#26684;&#24335;&#20013;&#30340;&#19968;&#31181;&#37325;&#26032;&#8220;&#21253;&#35013;&#8221;&#36215;&#26469;&#65292;&#28982;&#21518;&#20877;&#23545;&#23383;&#27573;&#36827;&#34892;&#8220;&#31579;&#36873;&#8221;&#12290;</p><pre class="screen">format filter {
	wrap json ...
	fields {
		&lt;field&gt; &lt;filter&gt; ...
	}
}</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="command"><strong>&lt;field&gt;</strong></span>&#65306;&#22240;&#20026;fields&#26159;&#21487;&#20197;&#23884;&#22871;&#30340;&#65292;&#22312;&#36825;&#37324;&#65292;&#20026;&#20102;&#34920;&#31034;&#23884;&#22871;&#30340;&#20851;&#31995;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>&gt;</strong></span>&#26469;&#34920;&#31034;&#65292;&#20363;&#22914;&#26377;&#19968;&#20010;&#23545;&#35937;{"a":{"b":0}}&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#20351;&#29992;a&gt;b&#26469;&#34920;&#31034;&#12290;</p></li><li class="listitem"><p><span class="command"><strong>&lt;filter&gt;</strong></span>&#65306;&#30446;&#21069;&#26377;3&#20010;&#8220;&#31579;&#36873;&#22120;&#8221;&#65306;<span class="command"><strong>delete</strong></span>&#12289;<span class="command"><strong>replace</strong></span>&#21644;<span class="command"><strong>ip_mask</strong></span></p></li></ul></div><p>&#20854;&#20013;&#65292;<span class="command"><strong>ts</strong></span>&#12289;<span class="command"><strong>level</strong></span>&#12289;<span class="command"><strong>logger</strong></span>&#21644;<span class="command"><strong>msg</strong></span>&#22235;&#20010;&#23383;&#27573;&#19981;&#33021;&#24212;&#29992;&#20110;&#8220;&#31579;&#36873;&#8221;&#26426;&#21046;&#12290;&#36825;&#20010;&#22235;&#20010;&#23383;&#27573;&#26159;&#26085;&#24535;&#30340;&#22522;&#30784;&#20869;&#23481;&#65292;&#26159;&#30001;&#26085;&#24535;&#31995;&#32479;&#32780;&#38750;caddy&#20915;&#23450;&#30340;&#12290;</p><p>&#20197;&#19979;&#26159;&#8220;&#31579;&#36873;&#8221;&#22120;&#30340;&#35828;&#26126;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><span class="command"><strong>delete</strong></span><p>&#20351;&#29992;&#36825;&#20010;&#21629;&#20196;&#26469;&#26631;&#27880;&#21738;&#20010;&#23383;&#27573;&#23558;&#34987;&#24573;&#30053;&#12290;</p><pre class="screen">&lt;field&gt; delete</pre></li><li class="listitem"><span class="command"><strong>replace</strong></span><p>&#20351;&#29992;&#36825;&#20010;&#21629;&#20196;&#26469;&#26631;&#35760;&#26576;&#20010;&#23383;&#27573;&#20351;&#29992;&#33258;&#23450;&#20041;&#30340;&#23383;&#31526;&#20018;&#26367;&#20195;&#12290;</p><pre class="screen">&lt;field&gt; replace &lt;replacement&gt;</pre></li><li class="listitem"><span class="command"><strong>ip_mask</strong></span><p>&#26631;&#35760;IP&#22320;&#22336;&#20351;&#29992;CIDR&#25513;&#30721;&#65292;&#20197;IPv4&#30340;ip&#22320;&#22336;&#20363;&#65292;&#26377;32&#20010;bit&#20026;&#65292;&#22914;&#26524;&#26631;&#35760;&#20026;<span class="command"><strong>ipv4 24</strong></span>&#65292;&#37027;&#20040;&#22312;&#26085;&#24535;&#20013;&#21482;&#35760;&#24405;&#21069;24&#20010;bit&#20301;&#65292;&#21518;&#38754;&#30340;8&#20010;&#35760;&#24405;&#20026;0&#65292;&#20363;&#22914;&#65292;&#26377;&#19968;&#20010;ip&#22320;&#22336;192.168.2.1&#65292;&#37027;&#20040;&#20250;&#34987;&#35760;&#24405;&#20026;192.168.2.0&#12290;&#20351;&#29992;&#26041;&#24335;&#22914;&#19979;&#65306;</p><pre class="screen">&lt;field&gt; ip_mask {
	ipv4 &lt;cidr&gt;
	ipv6 &lt;cidr&gt;
}</pre></li></ol></div><p>&#20316;&#20026;<span class="command"><strong>filter</strong></span>&#30340;&#37197;&#32622;&#65292;&#25105;&#20204;&#21487;&#20197;&#29992;&#19979;&#38754;&#30340;&#20363;&#23376;&#26469;&#35828;&#26126;&#65306;</p><pre class="screen">log {
  format filter { <a class="co" name="filter-co" href="ch02s03.html#filter"><span><img src="themes/default/callouts/1.png" alt="1" border="0"></span></a>
    wrap console
    fields {
      common_log delete <a class="co" name="common_log-co" href="ch02s03.html#common_log"><span><img src="themes/default/callouts/2.png" alt="2" border="0"></span></a>
      request&gt;remote_addr ip_mask {
        ipv4 24 <a class="co" name="ipv4-co" href="ch02s03.html#ipv4"><span><img src="themes/default/callouts/3.png" alt="3" border="0"></span></a>
        ipv6 32
      }
    }
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a name="filter"></a><a href="#filter-co"><span><img src="themes/default/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>&#22312;&#36825;&#20010;filter&#20013;&#65292;&#23553;&#35013;&#20102;console</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a name="common_log"></a><a href="#common_log-co"><span><img src="themes/default/callouts/2.png" alt="2" border="0"></span></a> </p></td><td valign="top" align="left"><p>&#23558;common_log&#37096;&#20998;&#21024;&#38500;</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a name="ipv4"></a><a href="#ipv4-co"><span><img src="themes/default/callouts/3.png" alt="3" border="0"></span></a> </p></td><td valign="top" align="left"><p>&#23545;ipv4&#30340;ip&#22320;&#22336;&#21482;&#35760;&#24405;&#21069;24&#20301;&#65292;ipv6&#30340;ip&#22320;&#22336;&#21482;&#35760;&#24405;&#21069;32&#20301;</p></td></tr></table></div></li></ol></div><p></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e705"></a>3.2.&nbsp;&#26684;&#24335;&#23646;&#24615;</h3></div></div></div><p>&#23545;&#27599;&#31181;&#26085;&#24535;&#26684;&#24335;&#65292;&#29305;&#21035;&#26159;<span class="command"><strong>console</strong></span>&#21644;<span class="command"><strong>json</strong></span>&#36824;&#26377;&#19968;&#20123;&#23646;&#24615;&#21487;&#20197;&#35774;&#32622;&#65306;</p><pre class="screen">format &lt;encoder_module&gt; {
    message_key &lt;key&gt;
    level_key   &lt;key&gt;
    time_key    &lt;key&gt;
    name_key    &lt;key&gt;
    caller_key  &lt;key&gt;
    stacktrace_key &lt;key&gt;
    line_ending  &lt;char&gt;
    time_format  &lt;format&gt;
    level_format &lt;format&gt;
}</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>message_key</strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#8220;message&#8221;&#23383;&#27573;&#30340;&#20851;&#38190;&#23383;&#65292;&#40664;&#35748;&#20540;&#26159;"msg"&#12290;</p></li><li class="listitem"><span class="command"><strong>level_key</strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#8220;level&#8221;&#23383;&#27573;&#30340;&#20851;&#38190;&#23383;&#65292;&#40664;&#35748;&#20540;&#26159;&#8220;level&#8221;&#12290;</p></li><li class="listitem"><span class="command"><strong>time_key</strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#8220;time&#8221;&#23383;&#27573;&#30340;&#20851;&#38190;&#23383;&#65292;&#40664;&#35748;&#20540;&#26159;&#8220;ts&#8221;&#12290;</p></li><li class="listitem"><span class="command"><strong>name_key</strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#8220;name&#8221;&#23383;&#27573;&#30340;&#20851;&#38190;&#23383;&#65292;&#40664;&#35748;&#20540;&#26159;&#8220;logger&#8221;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top">&#22312;caddy&#30340;&#23448;&#26041;&#25991;&#26723;&#20013;&#65292;&#35828;&#36825;&#20010;&#23383;&#27573;&#30340;&#40664;&#35748;&#20540;&#26159;"name"&#65292;&#20294;&#31508;&#32773;&#35797;&#39564;&#19979;&#26469;&#65292;&#20854;&#23454;&#26159;"logger"&#12290;</td></tr></table></div></li><li class="listitem"><span class="command"><strong>caller_key</strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#8220;caller&#8221;&#23383;&#27573;&#30340;&#20851;&#38190;&#23383;&#12290;</p></li><li class="listitem"><span class="command"><strong>stacktrace_key </strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#8220;stracktrace&#8221;&#23383;&#27573;&#30340;&#20851;&#38190;&#23383;&#12290;</p></li><li class="listitem"><span class="command"><strong>line_ending</strong></span><p>&#27599;&#26465;&#26085;&#24535;&#26465;&#30446;&#30340;&#32467;&#23614;&#23383;&#31526;&#65292;&#40664;&#35748;&#26159;&#22238;&#36710;&#31526;&#12290;</p></li><li class="listitem"><span class="command"><strong>time_format </strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;&#26102;&#38388;&#25139;&#30340;&#26684;&#24335;&#12290;</p><p>&#31508;&#32773;&#27809;&#26377;&#22312;caddy&#30340;&#23448;&#26041;&#25991;&#26723;&#20013;&#25214;&#21040;&#20855;&#20307;&#26377;&#21738;&#20123;&#8220;&#26102;&#38388;&#26684;&#24335;&#8221;&#65292;&#36890;&#36807;&#26597;&#38405;&#28304;&#20195;&#30721;&#65292;&#22312;<code class="filename">modules/logging/encoders.go</code>&#25991;&#20214;&#20013;&#25214;&#21040;&#22914;&#19979;&#20195;&#30721;&#65306;</p><pre class="programlisting">&nbsp;&nbsp;1 	// time format
&nbsp;&nbsp;2 	var timeFormatter zapcore.TimeEncoder
&nbsp;&nbsp;3 	switch lec.TimeFormat {
&nbsp;&nbsp;4 	case "", "unix_seconds_float":
&nbsp;&nbsp;5 		timeFormatter = zapcore.EpochTimeEncoder
&nbsp;&nbsp;6 	case "unix_milli_float":
&nbsp;&nbsp;7 		timeFormatter = zapcore.EpochMillisTimeEncoder
&nbsp;&nbsp;8 	case "unix_nano":
&nbsp;&nbsp;9 		timeFormatter = zapcore.EpochNanosTimeEncoder
&nbsp;10 	case "iso8601":
&nbsp;11 		timeFormatter = zapcore.ISO8601TimeEncoder
&nbsp;12 	default:
&nbsp;13 		timeFormat := lec.TimeFormat
&nbsp;14 		switch lec.TimeFormat {
&nbsp;15 		case "rfc3339":
&nbsp;16 			timeFormat = time.RFC3339
&nbsp;17 		case "rfc3339_nano":
&nbsp;18 			timeFormat = time.RFC3339Nano
&nbsp;19 		case "wall":
&nbsp;20 			timeFormat = "2006/01/02 15:04:05"
&nbsp;21 		case "wall_milli":
&nbsp;22 			timeFormat = "2006/01/02 15:04:05.000"
&nbsp;23 		case "wall_nano":
&nbsp;24 			timeFormat = "2006/01/02 15:04:05.000000000"
&nbsp;25 		case "common_log":
&nbsp;26 			timeFormat = "02/Jan/2006:15:04:05 -0700"
&nbsp;27 		}
&nbsp;28 		timeFormatter = func(ts time.Time, encoder zapcore.PrimitiveArrayEncoder) {
&nbsp;29 			encoder.AppendString(ts.UTC().Format(timeFormat))
&nbsp;30 		}
&nbsp;31 	}
&nbsp;32 	cfg.EncodeTime = timeFormatter</pre><p>&#20174;&#36825;&#27573;&#20195;&#30721;&#20013;&#21487;&#20197;&#30475;&#21040;&#65292;&#26102;&#38388;&#26684;&#24335;&#26377;&#22914;&#19979;&#20960;&#31181;&#65306;</p><p><code class="option">unix_seconds_float</code>&#12289;<code class="option">unix_milli_float</code>&#12289;<code class="option">unix_nano</code>&#12289;<code class="option">iso8601</code>&#12289;<code class="option">rfc3339</code>&#12289; <code class="option">rfc3339_nano</code>&#12289;<code class="option">wall</code>&#12289; <code class="option">wall_milli</code>&#12289;<code class="option">wall_nano</code>&#12289;<code class="option">common_log</code>&#12290;</p><p>&#20854;&#40664;&#35748;&#20540;&#26159;<code class="option">unix_seconds_float</code>&#12290;</p></li><li class="listitem"><span class="command"><strong>level_format</strong></span><p>&#26085;&#24535;&#26465;&#30446;&#20013;level&#30340;&#26684;&#24335;&#12290;</p><p>&#21516;&#26679;&#65292;&#22312;caddy&#30340;&#23448;&#26041;&#25991;&#26723;&#20013;&#27809;&#26377;&#25214;&#21040;&#20855;&#20307;&#26377;&#21738;&#20123;&#8220;level&#26684;&#24335;&#8221;&#65292;&#36890;&#36807;&#26597;&#38405;&#28304;&#20195;&#30721;&#65292;&#22312;<code class="filename">modules/logging/encoders.go</code>&#25991;&#20214;&#20013;&#25214;&#21040;&#22914;&#19979;&#20195;&#30721;&#65306;</p><pre class="programlisting">&nbsp;&nbsp;1 	// level format
&nbsp;&nbsp;2 	var levelFormatter zapcore.LevelEncoder
&nbsp;&nbsp;3 	switch lec.LevelFormat {
&nbsp;&nbsp;4 	case "", "lower":
&nbsp;&nbsp;5 		levelFormatter = zapcore.LowercaseLevelEncoder
&nbsp;&nbsp;6 	case "upper":
&nbsp;&nbsp;7 		levelFormatter = zapcore.CapitalLevelEncoder
&nbsp;&nbsp;8 	case "color":
&nbsp;&nbsp;9 		levelFormatter = zapcore.CapitalColorLevelEncoder
&nbsp;10 	}
&nbsp;11 	cfg.EncodeLevel = levelFormatter</pre><p>&#20174;&#36825;&#27573;&#20195;&#30721;&#20013;&#21487;&#20197;&#30475;&#21040;&#65292;&#26102;&#38388;&#26684;&#24335;&#26377;&#22914;&#19979;&#20960;&#31181;&#65306;<code class="option">lower</code>&#12289;<code class="option">upper</code>&#12289;<code class="option">color</code>&#12290;</p><p>&#20854;&#40664;&#35748;&#20540;&#26159;<code class="option">lower</code>&#12290;&#21363;&#23567;&#20889;&#12289;&#22823;&#20889;&#21644;&#24425;&#33394;&#12290;&#24403;&#35774;&#32622;&#20026;<code class="option">color</code>&#26102;&#65292;&#22312;&#26085;&#24535;&#26465;&#30446;&#20013;level&#23383;&#27573;&#20250;&#26377;&#19968;&#27573;&#24425;&#33394;&#32534;&#30721;&#65306;<code class="option">"level":"\u001b[34mINFO\u001b[0m" ...</code></p></li></ol></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top">&#31508;&#32773;&#23454;&#39564;&#19979;&#26469;&#65292;&#22312;&#25152;&#26377;&#36825;&#20123;&#26684;&#24335;&#23646;&#24615;&#20013;&#65292;&#22823;&#37096;&#20998;&#21482;&#26159;&#23545;json&#26684;&#24335;&#30340;&#26085;&#24535;&#26377;&#25928;&#65292;&#23545;console&#31561;&#26684;&#24335;&#26159;&#26080;&#25928;&#30340;&#65292;&#20363;&#22914;&#65306;<span class="command"><strong>message_key</strong></span>&#12289;<span class="command"><strong>level_key</strong></span>&#12289;<span class="command"><strong>time_key</strong></span>&#21644;<span class="command"><strong>name_key</strong></span>&#36825;&#22235;&#39033;&#65292;&#22312;console&#30340;&#26684;&#24335;&#37197;&#32622;&#20013;&#26159;&#26080;&#24847;&#20041;&#30340;&#65292;&#22240;&#20026;console&#26085;&#24535;&#26684;&#24335;&#30340;&#31532;&#19968;&#34892;&#21069;&#22235;&#39033;&#23601;&#26159;&#36825;&#22235;&#20010;&#23383;&#27573;&#65292;&#20182;&#20204;&#20197;"&#26080;key"&#30340;&#26041;&#24335;&#30452;&#25509;&#26174;&#31034;&#12290;</td></tr></table></div></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s02.html"><img src="themes/default/navig/prev.png" alt="&#19978;&#19968;&#39029;"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html"><img src="themes/default/navig/up.png" alt="&#19978;&#19968;&#32423;"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03.html"><img src="themes/default/navig/next.png" alt="&#19979;&#19968;&#39029;"></a></td></tr><tr><td width="40%" align="left" valign="top">2.&nbsp;&#36755;&#20986;&#65288;Output modules&#65289;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="themes/default/navig/home.png" alt="&#36215;&#22987;&#39029;"></a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#37197;&#32622;&#26696;&#20363;&#21450;&#26085;&#24535;&#35299;&#26512;</td></tr></table></div></body></html>