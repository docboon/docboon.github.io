<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Caddy&#20351;&#29992;&#25163;&#20876;</title><link rel="stylesheet" type="text/css" href="themes/default/style/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><style type="text/css">
body { background-image: url('themes/default/style/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="zh_cn" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>Caddy&#20351;&#29992;&#25163;&#20876;</h1></div><div><h2 class="subtitle"></h2></div><div><h3 class="corpauthor">https://docboon.github.io/</h3></div><div><div class="author"><h3 class="author"><span class="honorific">Mr</span>. <span class="firstname">Older</span> <span class="surname">Flower</span></h3><code class="email">&lt;<a class="email" href="mailto:olderflower[AT]outlook. com">olderflower[AT]outlook. com</a>&gt;</code></div></div><div><p class="copyright">&#29256;&#26435; &copy; 2021 2022 docboon</p></div><div><p class="pubdate">October 10th,2021 </p></div><div><div class="revhistory"><table style="border-style:solid; width:100%;" summary="&#20462;&#35746;&#21382;&#21490;"><tr><th align="left" valign="top" colspan="3"><b>&#20462;&#35746;&#21382;&#21490;</b></th></tr><tr><td align="left">&#20462;&#35746; 0.1</td><td align="left">2021&#24180;11&#26376;2&#26085;.</td><td align="left"><code class="email">&lt;<a class="email" href="mailto:olderflower[AT]outlook. com">olderflower[AT]outlook. com</a>&gt;</code></td></tr><tr><td align="left" colspan="3">&#25991;&#26723;&#24314;&#31435; </td></tr></table></div></div><div><div class="legalnotice"><a name="d0e61"></a><p><span class="emphasis"><em>&#29256;&#26435;&#22768;&#26126;</em></span></p><p>&#26412;&#20316;&#21697;&#30001;docboon&#23436;&#25104;&#65292;&#24182;&#22768;&#26126;&#20197;Creative Commons license (CC BY 4.0)&#35768;&#21487;&#21457;&#34892;&#12290;&#21363;&#24744;&#21487;&#20197;&#33258;&#30001;&#22320;&#65306;</p><div class="blockquote"><blockquote class="blockquote"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">&#20849;&#20139; &#8212; &#22312;&#20219;&#20309;&#23186;&#20171;&#20197;&#20219;&#20309;&#24418;&#24335;&#22797;&#21046;&#12289;&#21457;&#34892;&#26412;&#20316;&#21697;</li><li class="listitem">&#28436;&#32462; &#8212; &#20462;&#25913;&#12289;&#36716;&#25442;&#25110;&#20197;&#26412;&#20316;&#21697;&#20026;&#22522;&#30784;&#36827;&#34892;&#21019;&#20316;&#22312;&#20219;&#20309;&#29992;&#36884;&#19979;&#65292;&#29978;&#33267;&#21830;&#19994;&#30446;&#30340;&#12290;</li></ul></div></blockquote></div><p>&#24799;&#39035;&#36981;&#23432;&#19979;&#21015;&#26465;&#20214;&#65306;</p><div class="blockquote"><blockquote class="blockquote"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">&#32626;&#21517; &#8212; &#24744;&#24517;&#39035;&#32473;&#20986;&#26412;&#20316;&#21697;&#30340;&#32626;&#21517;&#65292;&#25552;&#20379;&#25351;&#21521;&#26412;&#35768;&#21487;&#21327;&#35758;&#30340;&#38142;&#25509;&#65292;&#21516;&#26102;&#26631;&#26126;&#26159;&#21542;&#65288;&#23545;&#26412;&#20316;&#21697;&#65289;&#20316;&#20102;&#20462;&#25913;&#12290;&#24744;&#21487;&#20197;&#29992;&#20219;&#20309;&#21512;&#29702;&#30340;&#26041;&#24335;&#26469;&#32626;&#21517;&#65292;&#20294;&#26159;&#19981;&#24471;&#20197;&#20219;&#20309;&#26041;&#24335;&#26263;&#31034;&#35768;&#21487;&#20154;&#20026;&#24744;&#25110;&#24744;&#30340;&#20351;&#29992;&#32972;&#20070;&#12290;</li><li class="listitem">&#27809;&#26377;&#38468;&#21152;&#38480;&#21046; &#8212; &#24744;&#19981;&#24471;&#36866;&#29992;&#27861;&#24459;&#26415;&#35821;&#25110;&#32773; &#25216;&#26415;&#25514;&#26045; &#20174;&#32780;&#38480;&#21046;&#20854;&#20182;&#20154;&#20570;&#35768;&#21487;&#21327;&#35758;&#20801;&#35768;&#30340;&#20107;&#24773;&#12290;</li></ul></div></blockquote></div><p><a class="link" href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_top">&#26356;&#22810;&#35768;&#21487;&#20449;&#24687;&#35831;&#21442;&#29031;&#27492;&#38142;&#25509;&#65306;</a></p><p><span class="emphasis"><em>&#21830;&#26631;&#22768;&#26126;</em></span></p><p><span class="emphasis"><em>Trademarks</em></span></p><p> <span class="trademark">PostScript</span>&reg; and <span class="trademark">PDF</span>&reg; are registered trademarks of Adobe Systems,Inc.  Other trademarks mentioned in this document are the property of their respective owners. </p></div></div><div><p class="releaseinfo">Exported by docboon [http://docboon.io] , on 2022-10-19 at 15:07:29 . olderflower[AT]outlook. com</p></div></div><hr></div><div class="toc"><p><b>&#30446;&#24405;</b></p><dl class="toc"><dt><span class="preface"><a href="#d0e100">&#25490;&#29256;&#32422;&#23450;</a></span></dt><dt><span class="chapter"><a href="#d0e191">1. &#20851;&#20110;caddy</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e194">1. &#31616;&#20171;</a></span></dt><dt><span class="sect1"><a href="#d0e217">2. &#23433;&#35013;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e224">2.1. &#20108;&#36827;&#21046;&#38745;&#24577;&#21253;</a></span></dt><dt><span class="sect2"><a href="#d0e239">2.2. deb&#21253;&#26041;&#24335;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e263">3. caddy&#30340;&#37197;&#32622;&#26041;&#24335;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d0e309">2. &#20351;&#29992;&#20837;&#38376;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d0e350">1. &#36816;&#34892;&#23432;&#25252;&#36827;&#31243;&#65288;Run the daemon&#65289;</a></span></dt><dt><span class="sect1"><a href="#d0e412">2. Caddyfile&#37197;&#32622;&#25991;&#20214;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e415">2.1. Hello World! ( Caddyfile )</a></span></dt><dt><span class="sect2"><a href="#d0e457">2.2. &#37197;&#32622;&#22810;&#31449;&#28857; ( Caddyfile &amp; API )</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e477">3. &#23581;&#35797;&#20351;&#29992;caddyAPI &amp; JSON</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e480">3.1. Hello World! ( Heredoc )</a></span></dt><dt><span class="sect2"><a href="#d0e506">3.2. Hello World! ( JSON )</a></span></dt><dt><span class="sect2"><a href="#d0e538">3.3. &#37197;&#32622;&#22810;&#31449;&#28857; ( JSON &amp; API)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e575">4. &#37197;&#32622;&#27979;&#35797;&#21644;adapter</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e578">4.1. &#23545;&#37197;&#32622;&#36827;&#34892;&#27979;&#35797;&#65288;Test config&#65289;</a></span></dt><dt><span class="sect2"><a href="#d0e597">4.2. adapter</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e617">5. JSON vs. Caddyfile</a></span></dt><dt><span class="sect1"><a href="#d0e698">6. API vs. Config files</a></span></dt><dt><span class="sect1"><a href="#d0e738">7. &#38745;&#24577;&#25991;&#20214;&#26381;&#21153;&#22120;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e743">7.1. command line</a></span></dt><dt><span class="sect2"><a href="#d0e784">7.2. Caddyfile</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e810">8. &#21453;&#21521;&#20195;&#29702;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e815">8.1. command line</a></span></dt><dt><span class="sect2"><a href="#d0e827">8.2. Caddyfile</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e845">9. HTTPS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e850">9.1. Caddyfile</a></span></dt><dt><span class="sect2"><a href="#d0e881">9.2. &#20351;&#29992;&#21629;&#20196;</a></span></dt></dl></dd></dl></dd></dl></div><div class="list-of-figures"><p><b>&#25554;&#22270;&#28165;&#21333;</b></p><dl><dt>2.1. <a href="#d0e317">caddy&#26381;&#21153;&#22120;&#32593;&#32476;&#25299;&#25169;&#22270;</a></dt><dt>2.2. <a href="#d0e877">caddy https</a></dt></dl></div><div class="list-of-tables"><p><b>&#34920;&#26684;&#28165;&#21333;</b></p><dl><dt>2.1. <a href="#d0e622">JSON vs. Caddyfile</a></dt><dt>2.2. <a href="#d0e703">API vs. config files</a></dt></dl></div><div class="preface"><div class="titlepage"><div><div><h1 class="title"><a name="d0e100"></a>&#25490;&#29256;&#32422;&#23450;</h1></div></div></div><p>&#22312;&#27491;&#25991;&#20013;&#20250;&#26377;&#19968;&#20123;&#35832;&#22914;&#31243;&#24207;&#20195;&#30721;&#12289;&#31995;&#32479;&#21629;&#20196;&#25110;&#26159;&#23631;&#24149;&#36755;&#20986;&#19968;&#31867;&#30340;&#20449;&#24687;&#65292;&#20026;&#20102;&#33021;&#28165;&#26224;&#22320;&#23637;&#31034;&#21508;&#31181;&#20803;&#32032;&#65292;&#26412;&#25163;&#20876;&#36981;&#23432;&#19979;&#21015;&#25490;&#29256;&#32422;&#23450;&#12290;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="emphasis"><em>&#23383;&#20307;&#32422;&#23450;</em></span>&#65292;&#22312;&#27491;&#25991;&#20013;&#23884;&#20837;&#30340;&#19968;&#20123;&#31995;&#32479;&#21629;&#20196;&#12289;&#25991;&#20214;&#21517;&#12289;&#20989;&#25968;&#25110;&#26159;&#21442;&#25968;&#31561;&#20351;&#29992;&#26377;&#21035;&#20110;&#27491;&#25991;&#30340;&#23383;&#20307;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>&#31561;&#23485;&#23383;&#20307;&#65306;&#31243;&#24207;&#29255;&#27573;&#12289;&#27491;&#25991;&#20013;&#20986;&#29616;&#30340;&#37197;&#32622;&#36873;&#39033;&#12289;&#21464;&#37327;&#12289;&#20989;&#25968;&#21517;&#31561;&#65292;&#25105;&#20204;&#37319;&#29992;&#31561;&#23485;&#23383;&#20307;&#65292;&#26679;&#24335;&#22914;&#19979;&#65306;<code class="option">serverip</code>&#12290;</p></li><li class="listitem"><p>&#31561;&#23485;&#24494;&#31895;&#23383;&#20307;&#65306;&#34920;&#31034;&#30001;&#29992;&#25143;&#36755;&#20837;&#30340;&#31995;&#32479;&#21629;&#20196;&#12290;&#20363;&#22914;&#65292;&#22312;linux&#19979;&#65292;&#25105;&#20204;&#26597;&#32593;&#32476;&#25509;&#21475;&#20449;&#24687;&#30340;&#21629;&#20196;&#65306;<span class="command"><strong>ifconfig eth0</strong></span>&#12290;</p></li><li class="listitem"><p>&#31561;&#23485;&#26012;&#20307;&#65306;&#34920;&#31034;&#30001;&#29992;&#25143;&#36755;&#20837;&#30340;&#20540;&#25110;&#26159;&#19968;&#20123;&#38656;&#35201;&#35774;&#23450;&#30340;&#21442;&#25968;&#30340;&#20540;&#65292;&#20363;&#22914;&#65292;&#29992;&#25143;&#22312;&#27983;&#35272;&#22120;&#37324;&#36755;&#20837;&#30340;&#19968;&#20010;url&#65292;&#29992;&#22914;&#19979;&#30340;&#26679;&#24335;&#26174;&#31034;&#65306;<strong class="userinput"><code>http://docboon.io</code></strong>&#12290;</p></li><li class="listitem"><p>&#31561;&#23485;&#24494;&#31895;&#26012;&#20307;&#23383;&#20307;&#65306;&#34920;&#31034;&#25991;&#20214;&#21517;&#12289;&#25968;&#25454;&#24211;&#21517;&#21450;&#26032;&#30340;&#26415;&#35821;&#31561;&#12290;&#20363;&#22914;&#65292;&#25991;&#20214;&#30340;&#21517;&#31216;&#29992;&#22914;&#19979;&#30340;&#26679;&#24335;&#26469;&#26174;&#31034;&#65306;<code class="filename">myfirst.xml</code>&#12290;</p></li></ol></div></li><li class="listitem"><p><span class="emphasis"><em>&#25552;&#31034;&#12289;&#21578;&#35819;&#31867;&#20449;&#24687;</em></span>&#65288;admonitions&#65289;&#65292;&#26377;&#19968;&#20123;&#20869;&#23481;&#26159;&#27491;&#25991;&#30340;&#34917;&#20805;&#25110;&#26159;&#23545;&#29992;&#25143;&#30340;&#19968;&#31181;&#25552;&#37266;&#12290;&#20026;&#20102;&#33021;&#28165;&#26224;&#22320;&#23637;&#31034;&#36825;&#37096;&#20998;&#20869;&#23481;&#65292;&#37319;&#29992;&#29420;&#31435;&#30340;&#8220;&#20449;&#24687;&#22359;&#8221;&#26469;&#21576;&#29616;&#12290;&#19968;&#20849;&#26377;5&#31181;&#65292;&#20998;&#21035;&#20026;&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top"><p>&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>apt-get upgrade</strong></span>&#26469;&#21319;&#32423;&#24744;&#30340;ubuntu&#25110;debian Linux&#31995;&#32479;&#12290;</p></td></tr></table></div></li><li class="listitem"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="themes/default/admon/note.png"></td><th align="left">&#27880;&#24847;</th></tr><tr><td align="left" valign="top"><p>&#22312;&#36816;&#34892;<span class="command"><strong>apt-get upgrade</strong></span>&#20043;&#21069;&#65292;&#38656;&#35201;&#20808;&#36816;&#34892;&#29992;<span class="command"><strong>apt-get update</strong></span>&#21629;&#20196;&#12290;</p></td></tr></table></div></li><li class="listitem"><div class="important" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#37325;&#35201;]" src="themes/default/admon/important.png"></td><th align="left">&#37325;&#35201;</th></tr><tr><td align="left" valign="top"><p>&#35831;&#21450;&#26102;&#21319;&#32423;&#31995;&#32479;&#34917;&#19969;&#31243;&#24207;&#65292;&#36825;&#26159;&#20445;&#35777;&#31995;&#32479;&#22788;&#20110;&#23433;&#20840;&#29366;&#24577;&#30340;&#22909;&#26041;&#27861;&#12290;</p></td></tr></table></div></li><li class="listitem"><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#23567;&#24515;]" src="themes/default/admon/caution.png"></td><th align="left">&#23567;&#24515;</th></tr><tr><td align="left" valign="top"><p>&#22914;&#26524;&#31995;&#32479;&#21319;&#32423;&#36824;&#27809;&#26377;&#23436;&#25104;&#65292;&#35831;&#19981;&#35201;&#37325;&#26032;&#21551;&#21160;&#24744;&#30340;&#30005;&#33041;&#12290;</p></td></tr></table></div></li><li class="listitem"><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#35686;&#21578;]" src="themes/default/admon/warning.png"></td><th align="left">&#35686;&#21578;</th></tr><tr><td align="left" valign="top"><p>&#22312;&#31995;&#32479;&#21319;&#32423;&#36807;&#31243;&#20013;&#21315;&#19975;&#19981;&#35201;&#20851;&#38381;&#30005;&#28304;&#12290;</p></td></tr></table></div></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em>&#23631;&#24149;&#20869;&#23481;&#22260;&#26639;&#21450;&#31243;&#24207;&#20195;&#30721;&#22260;&#26639;</em></span>&#65306;</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>&#23631;&#24149;&#20869;&#23481;&#22260;&#26639;&#65292;&#26377;&#26102;&#20505;&#25105;&#20204;&#38656;&#35201;&#25972;&#22359;&#26174;&#31034;&#22312;&#23631;&#24149;&#19978;&#36755;&#20986;&#30340;&#20869;&#23481;&#65292;&#25110;&#32773;&#26159;&#38190;&#20837;&#30340;&#21629;&#20196;&#12290;&#20363;&#22914;&#65292;&#22312;linux&#19979;&#65292;&#25105;&#20204;&#20351;&#29992;<span class="command"><strong>ifconfig eth0</strong></span>&#21629;&#20196;&#26469;&#26597;&#32593;&#32476;&#25509;&#21475;&#20449;&#24687;&#65306;</p><pre class="screen">$ ifconfig eth0
eth0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        ether 98:fa:9b:db:b9:9f  txqueuelen 1000  (&#20197;&#22826;&#32593;)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 16  memory 0xea300000-ea320000</pre></li><li class="listitem"><p>&#31243;&#24207;&#20195;&#30721;&#22260;&#26639;&#65292;&#23545;&#20110;&#19968;&#20123;&#31243;&#24207;&#20195;&#30721;&#65292;&#20351;&#29992;&#24102;&#26377;&#24207;&#21495;&#30340;&#26679;&#24335;&#26469;&#23637;&#31034;&#65292;&#20363;&#22914;&#65292;&#19968;&#27573;php&#20195;&#30721;&#65306;</p><pre class="programlisting">&nbsp;&nbsp;1 &lt;?php
&nbsp;&nbsp;2   class SimpleBook {
&nbsp;&nbsp;3     private $title;
&nbsp;&nbsp;4     
&nbsp;&nbsp;5     function __construct($title_in) {
&nbsp;&nbsp;6       $this-&gt;title  = $title_in;
&nbsp;&nbsp;7     }
&nbsp;&nbsp;8 
&nbsp;&nbsp;9     function getTitle() {return $this-&gt;title;}
&nbsp;10   }
&nbsp;11 ?&gt;</pre></li></ul></div></li></ol></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d0e191"></a>&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#20851;&#20110;caddy</h1></div></div></div><div class="toc"><p><b>&#30446;&#24405;</b></p><dl class="toc"><dt><span class="sect1"><a href="#d0e194">1. &#31616;&#20171;</a></span></dt><dt><span class="sect1"><a href="#d0e217">2. &#23433;&#35013;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e224">2.1. &#20108;&#36827;&#21046;&#38745;&#24577;&#21253;</a></span></dt><dt><span class="sect2"><a href="#d0e239">2.2. deb&#21253;&#26041;&#24335;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e263">3. caddy&#30340;&#37197;&#32622;&#26041;&#24335;</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e194"></a>1.&nbsp;&#31616;&#20171;</h2></div></div></div><p><span class="emphasis"><em>caddy</em></span>&#30446;&#21069;&#26159;ZeroSSL&#22312;&#32500;&#25252;&#30340;&#19968;&#20010;&#24320;&#28304;&#39033;&#30446;&#12290;ZeroSSL<a href="#ftn.d0e201" class="footnote" name="d0e201"><sup class="footnote">[1]</sup></a>&#21644;Let's Encrypt<a href="#ftn.d0e205" class="footnote" name="d0e205"><sup class="footnote">[2]</sup></a>&#19968;&#26679;&#65292;&#26159;&#19968;&#20010;SSL&#35777;&#20070;&#39041;&#21457;&#26426;&#26500;&#12290;Caddy&#23646;&#20110;web&#26381;&#21153;&#22120;&#30028;&#30340;&#26032;&#31168;&#12290;&#29992;go&#35821;&#35328;&#24320;&#21457;&#12290;&#19982;&#20854;&#20182;&#30340;web&#26381;&#21153;&#22120;&#30456;&#27604;&#65292;&#22240;&#20026;&#26377;&#20102;ZeroSSL&#30340;&#21152;&#25345;&#65292;caddy&#26368;&#22823;&#30340;&#19968;&#20010;&#29305;&#28857;&#23601;&#26159;&#23427;&#33258;&#24102;TLS&#65292;&#33021;&#38750;&#24120;&#26041;&#20415;&#30340;&#37096;&#32626;HTTPS&#12290;&#25353;&#29031;&#23448;&#26041;&#27493;&#39588;&#23433;&#35013;&#22909;&#20102;&#20197;&#21518;&#26080;&#38656;&#20219;&#20309;&#37197;&#32622;&#65292;&#23601;&#24050;&#32463;&#33258;&#24102;&#20102;https&#21151;&#33021;&#12290;&#21516;&#26102;&#65292;caddy&#20063;&#38750;&#24120;&#22909;&#22320;&#25903;&#25345;&#25104;&#35832;&#22914;&#20195;&#29702;&#12289;&#36127;&#36733;&#22343;&#34913;&#31561;&#21151;&#33021;&#12290;&#22312;HTTP/2&#21327;&#35758;&#19978;&#65292;caddy&#34920;&#29616;&#20063;&#38750;&#24120;&#22909;&#12290;&#21644;&#24456;&#22810;&#30340;&#24320;&#28304;&#36719;&#20214;&#19968;&#26679;&#65292;caddy&#30340;&#25991;&#26723;&#20063;&#24182;&#19981;&#26159;&#29305;&#21035;&#30340;&#20840;&#38754;&#65292;&#26377;&#19968;&#20123;&#36873;&#39033;&#21644;&#25351;&#20196;&#38656;&#35201;&#33258;&#24049;&#21435;&#23454;&#39564;&#25165;&#33021;&#26126;&#30333;&#20855;&#20307;&#22914;&#20309;&#20351;&#29992;&#12290;</p><p>caddy&#30340;&#21478;&#22806;&#19968;&#20010;&#29305;&#28857;&#65292;&#26159;&#21487;&#20197;&#36890;&#36807;nginx-adapter<a href="#ftn.d0e211" class="footnote" name="d0e211"><sup class="footnote">[3]</sup></a>&#27169;&#22359;&#26469;&#20351;&#29992;nginx&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;caddy&#31532;&#19968;&#20010;&#29256;&#26412;&#21457;&#24067;&#20110;2015&#24180;4&#26376;&#65292;&#25130;&#33267;&#26412;&#25991;&#25130;&#31295;&#65292;caddy&#30340;&#26368;&#26032;&#29256;&#26412;&#26159;2.4.5&#12290;</p><p><a class="link" href="https://caddyserver.com/" target="_top">https://caddyserver.com/</a></p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e217"></a>2.&nbsp;&#23433;&#35013;</h2></div></div></div><p>caddy&#38024;&#23545;&#19981;&#21516;&#30340;&#25805;&#20316;&#31995;&#32479;&#21644;&#24179;&#21488;&#37117;&#26377;&#19981;&#21516;&#30340;&#21457;&#34892;&#21253;&#12290;&#20063;&#26377;&#38745;&#24577;&#30340;&#24050;&#32463;&#32534;&#35793;&#22909;&#30340;&#20108;&#36827;&#21046;&#25991;&#20214;,&#21487;&#20197;&#30452;&#25509;&#19979;&#36733;&#20351;&#29992;&#12290;&#35814;&#32454;&#30340;&#23433;&#35013;&#35831;&#21442;&#32771;&#36825;&#20010;&#39029;&#38754;&#65306;<a class="link" href="https://caddyserver.com/docs/install" target="_top">https://caddyserver.com/docs/install</a>&#12290;&#22312;&#36825;&#37324;&#25105;&#20204;&#20165;&#32473;&#20986;&#20108;&#36827;&#21046;&#25991;&#20214;&#21644;deb&#30340;&#23433;&#35013;&#26041;&#24335;&#12290;</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e224"></a>2.1.&nbsp;&#20108;&#36827;&#21046;&#38745;&#24577;&#21253;</h3></div></div></div><p>&#20108;&#36827;&#21046;&#21253;&#23433;&#35013;&#26041;&#24335;&#24182;&#19981;&#20250;&#23558;caddy&#23433;&#35013;&#20026;&#19968;&#20010;&#26381;&#21153;&#65288;service&#65289;&#65292;&#20165;&#20165;&#26159;&#19968;&#20010;&#21487;&#20197;&#25191;&#34892;&#30340;&#31243;&#24207;&#12290;&#36825;&#31181;&#26041;&#24335;&#26356;&#36866;&#21512;&#24320;&#21457;&#21644;&#35843;&#35797;&#12290;&#30452;&#25509;&#21040;caddy&#30340;&#19979;&#36733;&#31449;&#28857;&#65306;<a class="link" href="https://caddyserver.com/download" target="_top">https://caddyserver.com/download</a>&#19979;&#36733;&#36866;&#21512;&#33258;&#24049;&#25805;&#20316;&#31995;&#32479;&#30340;&#21387;&#32553;&#21253;&#23601;&#21487;&#20197;&#20102;&#12290;&#22914;&#26524;&#26159;Linux&#31995;&#32479;&#65292;&#23558;&#35299;&#21387;&#32553;&#21518;&#30340;<span class="command"><strong>caddy</strong></span>&#21629;&#20196;&#22797;&#21046;&#21040;<code class="filename">/usr/local/bin</code>&#30446;&#24405;&#19979;&#23601;&#21487;&#20197;&#20102;&#12290;&#20363;&#22914;&#65306;</p><pre class="screen">cp caddy_linux_amd64 /usr/local/bin/caddy</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e239"></a>2.2.&nbsp;deb&#21253;&#26041;&#24335;</h3></div></div></div><p>&#22312;Debian&#12289;Ubuntu&#25110;Raspbian&#22522;&#20110;debian&#21253;&#30340;&#31995;&#32479;&#21487;&#20197;&#20351;&#29992;deb&#21253;&#30340;&#23433;&#35013;&#26041;&#24335;&#12290;&#36825;&#31181;&#26041;&#24335;&#20250;&#23558;caddy&#23433;&#35013;&#20026;&#19968;&#20010;<span class="emphasis"><em>systemd service</em></span>&#65292;&#21516;&#26102;&#65292;<span class="command"><strong>caddy-api</strong></span>&#36825;&#20010;&#26381;&#21153;&#20063;&#20250;&#34987;&#33258;&#21160;&#23433;&#35013;&#12290;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="emphasis"><em>Stable&#29256;&#26412;&#31995;&#32479;</em></span></p><pre class="screen">$ sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https
$ curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | \
      sudo tee /etc/apt/trusted.gpg.d/caddy-stable.asc
$ curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | \
      sudo tee /etc/apt/sources.list.d/caddy-stable.list
$ sudo apt update
$ sudo apt install caddy</pre></li><li class="listitem"><p><span class="emphasis"><em>Testing&#29256;&#26412;&#31995;&#32479;</em></span></p><pre class="screen">$ sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https
$ curl -1sLf 'https://dl.cloudsmith.io/public/caddy/testing/gpg.key' | \
      sudo tee /etc/apt/trusted.gpg.d/caddy-testing.asc
$ curl -1sLf 'https://dl.cloudsmith.io/public/caddy/testing/debian.deb.txt' | \
      sudo tee /etc/apt/sources.list.d/caddy-testing.list
$ sudo apt update
$ sudo apt install caddy</pre></li></ol></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e263"></a>3.&nbsp;caddy&#30340;&#37197;&#32622;&#26041;&#24335;</h2></div></div></div><p>&#20316;&#20026;&#27010;&#35272;&#65292;&#22312;&#26412;&#33410;&#25105;&#20204;&#20174;&#19968;&#20123;&#22522;&#30784;&#30340;&#26041;&#38754;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;caddy&#12290;</p><p>caddy&#30340;&#37197;&#32622;&#21644;&#22823;&#22810;&#25968;&#30340;web server&#19981;&#22826;&#19968;&#26679;&#12290;&#26377;&#19977;&#31181;&#19981;&#21516;&#30340;&#37197;&#32622;&#26041;&#24335;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="emphasis"><em>JSON</em></span><p>caddy&#30340;&#21407;&#29983;&#37197;&#32622;&#26159;JSON&#26684;&#24335;&#12290;&#20351;&#29992;JSON&#26684;&#24335;&#26469;&#37197;&#32622;caddy&#21487;&#20197;&#23454;&#29616;&#23427;&#30340;&#20840;&#37096;&#21151;&#33021;&#12290;&#22914;&#26524;&#19981;&#21916;&#27426;JSON&#30340;&#37197;&#32622;&#26041;&#24335;&#65292;&#20063;&#21487;&#26159;&#20351;&#29992;caddy&#25152;&#20855;&#22791;&#30340;&#8220;&#36866;&#37197;&#22120;&#65288;adapter&#65289;&#8221;&#21151;&#33021;&#26469;&#20351;&#29992;&#20854;&#20182;&#30340;&#37197;&#32622;&#26684;&#24335;&#12290;&#20854;&#20013;&#65292;Caddyfile&#23601;&#26159;&#8220;adapter&#8221;&#30340;&#19968;&#31181;&#12290;&#21478;&#22806;&#65292;caddy&#20063;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;&#8220;nginx adapter&#8221;&#26469;&#20351;&#29992;nginx&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;</p></li><li class="listitem"><span class="emphasis"><em>Caddyfile</em></span><p>&#36825;&#26159;&#19968;&#31181;&#27604;&#36739;&#23454;&#29992;&#21644;&#20415;&#25463;&#30340;&#26041;&#24335;&#12290;&#22312;&#36825;&#31181;&#26041;&#24335;&#19979;&#65292;&#20351;&#29992;<code class="filename">Caddyfile</code>&#36825;&#20010;&#25991;&#20214;&#26469;&#37197;&#32622;&#31995;&#32479;&#12290;&#36825;&#20010;&#25991;&#20214;&#30340;&#37197;&#32622;&#35821;&#27861;&#27604;&#36739;&#23481;&#26131;&#38405;&#35835;&#65292;&#24182;&#19988;&#20063;&#33021;&#22815;&#32988;&#20219;&#22823;&#37096;&#20998;&#30340;&#20351;&#29992;&#22330;&#26223;&#12290;&#23427;&#30340;&#26679;&#23376;&#22914;&#19979;&#65306;</p><pre class="programlisting">&nbsp;&nbsp;1 example.com
&nbsp;&nbsp;2 
&nbsp;&nbsp;3 root * /var/www/wordpress
&nbsp;&nbsp;4 php_fastcgi unix//run/php/php-version-fpm.sock
&nbsp;&nbsp;5 file_server</pre><p>&#36825;&#20010;&#25991;&#20214;&#21487;&#20197;&#20445;&#23384;&#20110;&#31995;&#32479;&#20013;&#30340;&#20219;&#20309;&#20301;&#32622;&#12290;&#21482;&#38656;&#22312;&#21551;&#21160;&#26102;&#20351;&#29992;&#22914;&#19979;&#21629;&#20196;&#36827;&#34892;&#25351;&#23450;&#23601;&#21487;&#20197;&#20102;&#12290;</p><pre class="screen">caddy adapt --config /path/to/Caddyfile</pre><p>caddy&#20351;&#29992;&#30340;&#37197;&#32622;&#25991;&#20214;&#26159;JSON&#26684;&#24335;&#30340;&#65292;&#20854;&#20182;&#26684;&#24335;&#30340;&#25991;&#20214;&#65292;&#20363;&#22914;Caddyfile&#65292;&#38656;&#35201;&#20351;&#29992;&#37197;&#32622;&#36866;&#37197;&#22120;&#23558;&#20854;&#36716;&#25442;&#20026;JSON&#26684;&#24335;&#12290;caddy&#21033;&#29992;&#36825;&#31181;&#26426;&#21046;&#21487;&#20197;&#20351;&#29992;&#20854;&#20182;&#31867;&#22411;&#30340;&#37197;&#32622;&#25991;&#20214;&#65292;&#30446;&#21069;&#25903;&#25345;8&#31181;&#65306;Caddyfile&#12289;nginx&#30340;&#37197;&#32622;&#25991;&#20214;&#12289;jsonc&#12289;josn5&#12289;yaml&#12289;cue&#12289;toml&#12289;&#21450;hcl</p></li><li class="listitem"><span class="emphasis"><em>caddyAPI</em></span><p>caddy&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#31649;&#29702;&#31471;&#28857;&#65288;administration endpoint&#65289;&#26469;&#37197;&#32622;&#65292;&#36825;&#20010;&#31649;&#29702;&#31471;&#28857;&#26159;&#19968;&#22871;&#36890;&#36807;HTTP&#21327;&#35758;&#20351;&#29992;&#26469;&#20351;&#29992;&#30340;REST API&#12290;&#36825;&#20010;&#8220;&#31649;&#29702;&#31471;&#28857;&#8221;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#36827;&#34892;&#37197;&#32622;&#12290;&#23427;&#30340;&#40664;&#35748;&#20351;&#29992;&#22320;&#22336;&#26159;&#65306;<code class="uri">localhost:2019</code></p></li></ol></div><p>&#19978;&#38754;&#25152;&#35828;&#21040;&#30340;&#65292;&#26159;caddy&#30340;&#19977;&#31181;&#37197;&#32622;&#21644;&#31649;&#29702;&#30340;&#26041;&#24335;&#12290;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20250;&#38470;&#32493;&#36827;&#34892;&#35828;&#26126;&#12290;</p><p>&#22914;&#26524;&#26159;&#20351;&#29992;&#26576;&#31181;&#21253;&#31649;&#29702;&#26041;&#24335;&#23433;&#35013;&#30340;caddy&#65292;&#37027;&#20040;caddy&#24050;&#32463;&#26159;&#19968;&#20010;&#31995;&#32479;&#26381;&#21153;&#20102;&#65292;&#21487;&#33021;&#24050;&#32463;&#21551;&#21160;&#20102;&#12290;&#22312;&#24320;&#22987;&#36825;&#33410;&#30340;&#20869;&#23481;&#20043;&#21069;&#65292;&#24314;&#35758;&#20808;&#23558;caddy&#20572;&#27490;&#36816;&#34892;&#12290;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy stop</strong></span>&#21629;&#20196;&#26469;&#20572;&#27490;caddy&#26381;&#21153;&#12290;&#19979;&#38754;&#65292;&#25105;&#20204;&#36890;&#36807;&#22914;&#19979;&#30340;&#20960;&#20010;&#23454;&#39564;&#26469;&#23545;caddy&#36827;&#34892;&#19968;&#20010;&#22823;&#33268;&#30340;&#20102;&#35299;&#12290;</p></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.d0e201" class="footnote"><p><a href="#d0e201" class="para"><sup class="para">[1] </sup></a><a class="link" href="https://zerossl.com/" target="_top">https://zerossl.com/</a></p></div><div id="ftn.d0e205" class="footnote"><p><a href="#d0e205" class="para"><sup class="para">[2] </sup></a><a class="link" href="https://letsencrypt.org/" target="_top">https://letsencrypt.org/</a></p></div><div id="ftn.d0e211" class="footnote"><p><a href="#d0e211" class="para"><sup class="para">[3] </sup></a><a class="link" href="https://github.com/caddyserver/nginx-adapter" target="_top">https://github.com/caddyserver/nginx-adapter</a></p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d0e309"></a>&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20351;&#29992;&#20837;&#38376;</h1></div></div></div><div class="toc"><p><b>&#30446;&#24405;</b></p><dl class="toc"><dt><span class="sect1"><a href="#d0e350">1. &#36816;&#34892;&#23432;&#25252;&#36827;&#31243;&#65288;Run the daemon&#65289;</a></span></dt><dt><span class="sect1"><a href="#d0e412">2. Caddyfile&#37197;&#32622;&#25991;&#20214;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e415">2.1. Hello World! ( Caddyfile )</a></span></dt><dt><span class="sect2"><a href="#d0e457">2.2. &#37197;&#32622;&#22810;&#31449;&#28857; ( Caddyfile &amp; API )</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e477">3. &#23581;&#35797;&#20351;&#29992;caddyAPI &amp; JSON</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e480">3.1. Hello World! ( Heredoc )</a></span></dt><dt><span class="sect2"><a href="#d0e506">3.2. Hello World! ( JSON )</a></span></dt><dt><span class="sect2"><a href="#d0e538">3.3. &#37197;&#32622;&#22810;&#31449;&#28857; ( JSON &amp; API)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e575">4. &#37197;&#32622;&#27979;&#35797;&#21644;adapter</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e578">4.1. &#23545;&#37197;&#32622;&#36827;&#34892;&#27979;&#35797;&#65288;Test config&#65289;</a></span></dt><dt><span class="sect2"><a href="#d0e597">4.2. adapter</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e617">5. JSON vs. Caddyfile</a></span></dt><dt><span class="sect1"><a href="#d0e698">6. API vs. Config files</a></span></dt><dt><span class="sect1"><a href="#d0e738">7. &#38745;&#24577;&#25991;&#20214;&#26381;&#21153;&#22120;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e743">7.1. command line</a></span></dt><dt><span class="sect2"><a href="#d0e784">7.2. Caddyfile</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e810">8. &#21453;&#21521;&#20195;&#29702;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e815">8.1. command line</a></span></dt><dt><span class="sect2"><a href="#d0e827">8.2. Caddyfile</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e845">9. HTTPS</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e850">9.1. Caddyfile</a></span></dt><dt><span class="sect2"><a href="#d0e881">9.2. &#20351;&#29992;&#21629;&#20196;</a></span></dt></dl></dd></dl></div><p>&#20026;&#20102;&#33021;&#26356;&#28165;&#26224;&#22320;&#25551;&#36848;&#65292;&#25105;&#20204;&#22312;&#23616;&#22495;&#32593;&#20013;&#35774;&#31435;&#19968;&#21488;caddy&#26381;&#21153;&#22120;&#65292;&#25105;&#20204;&#31216;&#20026;<span class="emphasis"><em>Server</em></span>&#65292;&#20854;&#20869;&#32593;IP&#22320;&#22336;&#26159;192.168.31.2/24&#65292;&#22806;&#32593;IP&#22320;&#22336;&#26159;192.168.1.2/24&#12290;&#25105;&#20204;&#22312;&#20854;&#19978;&#23433;&#35013;Debian Linux&#65288;V12&#65289;&#12290;</p><div class="figure"><a name="d0e317"></a><p class="title"><b>&#22270;&nbsp;2.1.&nbsp;caddy&#26381;&#21153;&#22120;&#32593;&#32476;&#25299;&#25169;&#22270;</b></p><div class="figure-contents"><div><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="180"><tr><td><img src="images/env.png" width="180" alt="caddy&#26381;&#21153;&#22120;&#32593;&#32476;&#25299;&#25169;&#22270;"></td></tr></table></div></div></div><br class="figure-break"><p>&#21516;&#26102;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;&#23458;&#25143;&#31471;&#65288;&#23458;&#25143;&#31471;&#20351;&#29992;&#20102;Ubuntu&#26700;&#38754;&#31995;&#32479;&#65289;&#21644;caddy server&#31471;&#23433;&#35013;&#20004;&#20010;&#24037;&#20855;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="emphasis"><em>curl</em></span><p><span class="command"><strong>curl</strong></span>&#65292;&#21363;client-URL&#65292;&#21487;&#20197;&#35748;&#20026;&#26159;&#19968;&#20010;&#21629;&#20196;&#34892;&#30340;&#27983;&#35272;&#22120;&#65292;&#22312;Debian/Ubuntu&#19979;&#20351;&#29992;<span class="command"><strong>apt-get install curl</strong></span>&#21629;&#20196;&#26469;&#23433;&#35013;&#12290;&#23427;&#30340;&#23448;&#26041;&#31449;&#28857;&#26159;<a class="link" href="https://curl.se/" target="_top">https://curl.se/</a></p></li><li class="listitem"><span class="emphasis"><em>jq</em></span><p><span class="command"><strong>jq</strong></span> &#26159;&#19968;&#20010;&#22522;&#20110;&#21629;&#20196;&#34892;&#30340;&#12289;&#36731;&#37327;&#32423;JSON&#25991;&#20214;&#22788;&#29702;&#24037;&#20855;&#65292;caddy&#30340;&#21407;&#29983;&#37197;&#32622;&#25991;&#20214;&#26159;JSON&#25991;&#20214;&#65292;&#25105;&#20204;&#38656;&#35201;&#29992;<span class="command"><strong>jq</strong></span>&#21629;&#20196;&#26469;&#23558;&#20854;&#26684;&#24335;&#21270;&#65292;&#20197;&#20415;&#20110;&#38405;&#35835;&#12290;&#22312;Debian&#25110;Ubuntu&#19979;&#21487;&#36890;&#36807;<span class="command"><strong>apt-get install jq</strong></span>&#26469;&#23433;&#35013;&#12290;&#20851;&#20110;&#20854;&#26356;&#22810;&#20869;&#23481;&#35831;&#35775;&#38382;&#65306;<a class="link" href="https://stedolan.github.io/jq/" target="_top">https://stedolan.github.io/jq/</a>&#12290;</p></li></ol></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e350"></a>1.&nbsp;&#36816;&#34892;&#23432;&#25252;&#36827;&#31243;&#65288;Run the daemon&#65289;</h2></div></div></div><p>&#22312;&#32456;&#31471;&#36755;&#20837;<span class="command"><strong>caddy</strong></span>&#21629;&#20196;&#65292;&#20250;&#26174;&#31034;help&#20449;&#24687;&#12290;&#22914;&#26524;&#24819;&#35753;caddy&#20316;&#20026;&#23432;&#25252;&#36827;&#31243;&#26469;&#36816;&#34892;&#65292;&#26377;&#20004;&#20010;&#23376;&#21629;&#20196;&#21487;&#20197;&#20351;&#29992;&#65306;<span class="command"><strong>run</strong></span>&#21644;<span class="command"><strong>start</strong></span>&#12290;&#22312;&#32456;&#31471;&#20013;&#36755;&#20837;<span class="command"><strong>caddy run</strong></span>&#25110;<span class="command"><strong>caddy start</strong></span>&#21363;&#21487;&#12290;<span class="command"><strong>run</strong></span>&#21644;<span class="command"><strong>start</strong></span>&#30340;&#21306;&#21035;&#26159;&#65306;</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="command"><strong>run</strong></span>&#65306;&#24320;&#21551;caddy&#36827;&#31243;&#65292;&#21487;&#20197;&#38543;&#26102;&#20351;&#29992;&#65288;Ctrl+C&#65289;&#25110;&#20851;&#38381;&#32456;&#31471;&#26469;&#32467;&#26463;&#20854;&#36816;&#34892;&#12290;</li><li class="listitem"><span class="command"><strong>start</strong></span>&#65306;&#24320;&#21551;caddy&#36827;&#31243;&#65292;&#24182;&#22312;&#21518;&#21488;&#36816;&#34892;&#12290;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy sotp</strong></span>&#26469;&#32467;&#26463;&#20854;&#36816;&#34892;&#12290;</li></ol></div><p>&#22312;&#37197;&#32622;&#25991;&#20214;&#20026;&#31354;&#30340;&#24773;&#20917;&#19979;&#65292;&#36816;&#34892;<span class="command"><strong>caddy run</strong></span>&#25110;<span class="command"><strong>caddy start</strong></span>&#20043;&#21518;&#65292;&#31995;&#32479;&#20250;&#24320;&#21551;&#19968;&#20010;&#26412;&#22320;&#30340;2019&#31471;&#21475;&#65292;&#36825;&#20010;&#31471;&#21475;&#23601;&#26159;caddy&#30340;API&#31649;&#29702;&#25509;&#21475;&#12290;&#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#25509;&#21475;&#23545;caddy&#23436;&#25104;&#24456;&#22810;&#30340;&#25805;&#20316;&#12290;</p><p>&#19979;&#38754;&#30340;&#20869;&#23481;&#23601;&#26159;&#20351;&#29992;<span class="command"><strong>caddy start</strong></span>&#21551;&#21160;&#31995;&#32479;&#20043;&#21518;&#30340;&#23631;&#24149;&#20869;&#23481;&#65292;&#36890;&#36807;&#20351;&#29992;<span class="command"><strong>netstat -ptuln</strong></span>&#21629;&#20196;&#65292;&#21487;&#20197;&#30475;&#21040;&#65292;caddy&#24320;&#21551;&#20102;&#26412;&#22320;&#30340;2019&#31649;&#29702;&#31471;&#21475;&#65306;</p><pre class="screen">root@lognovel:~# caddy start
2021/11/08 05:46:38.499	INFO	admin	admin endpoint started	{"address": "tcp/localhost:2019", \
         "enforce_origin": false, "origins": ["localhost:2019", "[::1]:2019", "127.0.0.1:2019"]}
2021/11/08 05:46:38.499	INFO	serving initial configuration
Successfully started Caddy (pid=1850) - Caddy is running in the background
root@lognovel:~# netstat -ptuln
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address    State       PID/Program name    
tcp        0      0 127.0.0.1:2019          0.0.0.0:*          LISTEN      1850/caddy          
... ...</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="themes/default/admon/note.png"></td><th align="left">&#27880;&#24847;</th></tr><tr><td align="left" valign="top">caddy&#25152;&#21551;&#21160;&#30340;2019&#31471;&#21475;L&#24182;&#38750;&#25105;&#20204;&#30340;web&#31449;&#28857;&#65292;&#32780;&#26159;&#8220;&#31649;&#29702;&#31471;&#28857;&#65288;administration endpoint&#65289;&#8221;&#65292;&#20063;&#23601;&#26159;caddy&#30340;API&#12290;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#36816;&#34892;&#22312;&#26412;&#26426;&#30340;2019&#31471;&#21475;&#65292;&#24182;&#19988;&#21482;&#20801;&#35768;&#26412;&#26426;&#35775;&#38382;&#12290;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>curl localhost:2019/config/</strong></span>&#21629;&#20196;&#26469;&#26597;&#30475;&#31995;&#32479;&#37197;&#32622;&#12290;</td></tr></table></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e412"></a>2.&nbsp;Caddyfile&#37197;&#32622;&#25991;&#20214;</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e415"></a>2.1.&nbsp;Hello World! ( Caddyfile )</h3></div></div></div><p>&#22312;caddy&#30340;&#37197;&#32622;&#26041;&#24335;&#20013;&#65292;Caddyfile&#25991;&#20214;&#23545;&#20154;&#26469;&#35828;&#26159;&#27604;&#36739;&#23481;&#26131;&#38405;&#35835;&#30340;&#12290;&#25105;&#20204;&#32534;&#36753;&#19968;&#20010;&#25991;&#20214;&#65292;&#21517;&#20026;<code class="filename">Caddyfile</code>&#65288;&#27809;&#26377;&#25193;&#23637;&#21517;&#65292;C&#23383;&#27597;&#22823;&#20889;&#65292;&#20854;&#20182;&#23383;&#27597;&#23567;&#20889;&#65281;&#65289;&#12290;&#22312;<code class="filename">Caddyfile</code>&#20013;&#21152;&#20837;&#22914;&#19979;&#20869;&#23481;&#65306;</p><pre class="screen">:2015
respond "Hello, world!"</pre><p>&#29616;&#22312;&#20572;&#27490;caddy&#30340;&#36816;&#34892;&#65292;&#20351;&#29992;&#65288;Ctrl+C&#65289;&#65292;&#22914;&#26524;&#26159;&#36816;&#34892;&#22312;&#23432;&#25252;&#36827;&#31243;&#29366;&#24577;&#19979;&#30340;&#35805;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy stop</strong></span>&#21629;&#20196;&#12290;&#28982;&#21518;&#65292;&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#20877;&#27425;&#36816;&#34892;caddy</p><pre class="screen">caddy run</pre><p>&#36825;&#20010;&#21629;&#20196;&#20250;&#22312;&#24403;&#21069;&#30446;&#24405;&#19979;&#23547;&#25214;<code class="filename">Caddyfile</code>&#25991;&#20214;&#65292;&#24182;&#30452;&#25509;&#21152;&#36733;&#23427;&#12290;&#22914;&#26524;<code class="filename">Caddyfile</code>&#36825;&#20010;&#25991;&#20214;&#20445;&#23384;&#22312;&#20854;&#20182;&#20301;&#32622;&#65292;&#37027;&#38656;&#35201;&#25351;&#26126;&#20855;&#20307;&#30340;&#36335;&#24452;&#65306;</p><pre class="screen">caddy run --config /path/to/Caddyfile</pre><p>&#23454;&#38469;&#19978;&#65292;&#19978;&#38754;&#30340;&#21629;&#20196;&#26159;&#19979;&#38754;&#19968;&#34892;&#21629;&#20196;&#30340;&#32553;&#20889;&#65292;&#30465;&#25481;&#20102;<code class="option">--adapter caddyfile</code>&#65292;&#22240;&#20026;&#40664;&#35748;&#24773;&#20917;&#19979;caddy&#20351;&#29992;Caddyfile adapter&#65292;</p><pre class="screen">caddy run --adapter caddyfile --config /path/to/Caddyfile</pre><p>&#25509;&#19979;&#26469;&#65292;&#22312;&#21478;&#22806;&#19968;&#20010;&#32456;&#31471;&#20013;&#36755;&#20837;&#65306;<span class="command"><strong>curl https://localhost</strong></span>&#65292;&#23601;&#20250;&#30475;&#21040;&#8221;Hello World!&#8220;&#12290;</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e457"></a>2.2.&nbsp;&#37197;&#32622;&#22810;&#31449;&#28857; ( Caddyfile &amp; API )</h3></div></div></div><p>&#29616;&#22312;&#25105;&#20204;&#26356;&#25913;<code class="filename">Caddyfile</code>&#65292;&#22312;&#20854;&#20013;&#23450;&#20041;&#20004;&#20010;&#31449;&#28857;&#65292;&#20869;&#23481;&#22914;&#19979;&#65306;</p><pre class="screen">localhost {
	respond "Hello, world!"
}

localhost:2016 {
	respond "Goodbye, world!"
}</pre><p>&#25105;&#20204;&#20351;&#29992;API&#30340;&#26041;&#24335;&#23558;&#36825;&#20123;&#20869;&#23481;&#21152;&#36733;&#21040;&#31995;&#32479;&#20013;&#65292;&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#65306;</p><pre class="screen">curl localhost:2019/load \
	-X POST \
	-H "Content-Type: text/caddyfile" \
	--data-binary @Caddyfile</pre><p>&#28982;&#21518;&#20351;&#29992;<span class="command"><strong>curl https://localhost:2016</strong></span>&#21629;&#20196;&#65292;&#20415;&#20250;&#30475;&#21040;&#8220;Goodbye, world!&#8221;</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e477"></a>3.&nbsp;&#23581;&#35797;&#20351;&#29992;caddyAPI &amp; JSON</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e480"></a>3.1.&nbsp;Hello World! ( Heredoc )</h3></div></div></div><p>&#20351;&#29992;<span class="command"><strong>caddy run</strong></span>&#25110;<span class="command"><strong>caddy start</strong></span>&#21551;&#21160;caddy&#65292;&#19981;&#35201;&#24102;&#20219;&#20309;&#37197;&#32622;&#25991;&#20214;&#12290;&#29616;&#22312;caddy&#24050;&#32463;&#22312;&#8220;&#31354;&#36716;&#8221;&#20102;&#65292;&#25105;&#20204;&#20351;&#29992;Heredoc<a href="#ftn.d0e491" class="footnote" name="d0e491"><sup class="footnote">[4]</sup></a>&#30340;&#26041;&#24335;&#65292;&#36890;&#36807;API&#25509;&#21475;&#32473;&#23427;&#21152;&#36733;&#19968;&#20123;&#37197;&#32622;&#65306;</p><pre class="screen">curl localhost:2019/load \
    -X POST \
    -H "Content-Type: application/json" \
    -d @- &lt;&lt; EOF
    {
        "apps": {
            "http": {
                "servers": {
                    "hello": {
                        "listen": [":2015"],
                        "routes": [
                            {
                                "handle": [{
                                    "handler": "static_response",
                                    "body": "Hello, world!"
                                }]
                            }
                        ]
                    }
                }
            }
        }
    }
EOF</pre><p>&#25226;&#36825;&#20010;&#37197;&#32622;&#21152;&#36733;&#21040;caddy&#20197;&#21518;&#65292;&#25105;&#20204;&#22312;&#23458;&#25143;&#31471;&#20351;&#29992;&#27983;&#35272;&#22120;&#35775;&#38382;caddy&#26381;&#21153;&#22120;&#30340;2015&#31471;&#21475;&#65292;<strong class="userinput"><code>http://192.168.31.2:2015</code></strong>&#65292;&#25110;&#32773;&#20063;&#21487;&#20197;&#20351;&#29992;&#21629;&#20196;&#65306;<span class="command"><strong>curl http://192.168.31.2:2015</strong></span>&#12290;&#25105;&#20204;&#20250;&#30475;&#21040;&#8220;Hello, world!&#8221;</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e506"></a>3.2.&nbsp;Hello World! ( JSON )</h3></div></div></div><p>&#29992;Heredoc&#23383;&#31526;&#27969;&#30340;&#26041;&#24335;&#21152;&#36733;&#37197;&#32622;&#36824;&#26159;&#26377;&#28857;&#36153;&#21170;&#30340;&#65292;&#21069;&#38754;&#30340;&#20363;&#23376;&#21482;&#26159;&#35753;&#25105;&#20204;&#30693;&#36947;caddy&#30340;&#36825;&#31181;&#24037;&#20316;&#26041;&#24335;&#12290;&#26356;&#24120;&#29992;&#30340;&#26041;&#24335;&#36824;&#26159;&#25226;&#37197;&#32622;&#20889;&#22312;&#19968;&#20010;&#25991;&#20214;&#20013;&#65292;&#28982;&#21518;&#20877;&#21152;&#36733;&#12290;</p><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#25226;&#21069;&#38754;&#30340;&#37197;&#32622;&#20869;&#23481;&#20889;&#20837;&#21040;&#19968;&#20010;&#31616;&#21333;&#30340;JSON&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#28982;&#21518;&#21516;&#26679;&#20351;&#29992;<span class="command"><strong>curl</strong></span>&#21629;&#20196;&#23436;&#25104;&#21152;&#36733;&#12290;&#25991;&#20214;&#21517;&#31216;&#20026;<code class="filename">caddy.json</code>&#65292;&#20854;&#20869;&#23481;&#22914;&#19979;&#65306;</p><pre class="programlisting">&nbsp;&nbsp;1 {
&nbsp;&nbsp;2     "apps": {
&nbsp;&nbsp;3         "http": {
&nbsp;&nbsp;4             "servers": {
&nbsp;&nbsp;5                 "hello": {
&nbsp;&nbsp;6                     "listen": [":2015"],
&nbsp;&nbsp;7                     "routes": [
&nbsp;&nbsp;8                         {
&nbsp;&nbsp;9                             "handle": [{
&nbsp;10                                 "handler": "static_response",
&nbsp;11                                 "body": "Hello, world!"
&nbsp;12                             }]
&nbsp;13                         }
&nbsp;14                     ]
&nbsp;15                 }
&nbsp;16             }
&nbsp;17         }
&nbsp;18     }
&nbsp;19 }</pre><p>&#29616;&#22312;&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#21152;&#36733;&#36825;&#20010;&#37197;&#32622;&#25991;&#20214;&#65306;</p><pre class="screen">curl localhost:2019/load \
	-X POST \
	-H "Content-Type: application/json" \
	-d @caddy.json</pre><p>&#21516;&#26679;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;&#23458;&#25143;&#31471;&#36890;&#36807;&#27983;&#35272;&#22120;&#25110;<span class="command"><strong>curl</strong></span>&#26469;&#35775;&#38382;&#19968;&#19979;2015&#31471;&#21475;&#65306;</p><pre class="screen">curl http//192.168.31.2:2015</pre><p>&#22914;&#26524;&#33021;&#30475;&#21040;Hello,world!&#37027;&#23601;&#20195;&#34920;&#21018;&#25165;&#30340;&#37197;&#32622;&#25991;&#20214;&#24050;&#32463;&#29983;&#25928;&#20102;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top">&#23454;&#38469;&#19978;caddyAPI&#22312;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#26159;&#20026;&#20854;&#20182;&#31243;&#24207;&#25152;&#35774;&#35745;&#30340;&#19968;&#31181;&#25509;&#21475;&#12290;</td></tr></table></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e538"></a>3.3.&nbsp;&#37197;&#32622;&#22810;&#31449;&#28857; ( JSON &amp; API)</h3></div></div></div><p>&#25509;&#19979;&#26469;&#25105;&#20204;&#26356;&#26032;&#19968;&#19979;<code class="filename">caddy.json</code>&#25991;&#20214;&#65292;&#23450;&#20041;&#20004;&#20010;&#31449;&#28857;&#65292;&#19968;&#20010;&#22312;2015&#31471;&#21475;&#65292;&#19968;&#20010;&#22312;2016&#31471;&#21475;&#65306;</p><pre class="programlisting">&nbsp;&nbsp;1 {
&nbsp;&nbsp;2     "apps": {
&nbsp;&nbsp;3         "http": {
&nbsp;&nbsp;4             "servers": {
&nbsp;&nbsp;5                 "hello": {
&nbsp;&nbsp;6                     "listen": [":2015"],
&nbsp;&nbsp;7                     "routes": [
&nbsp;&nbsp;8                         {
&nbsp;&nbsp;9                             "handle": [{
&nbsp;10                                 "handler": "static_response",
&nbsp;11                                 "body": "Hello, world!"
&nbsp;12                             }]
&nbsp;13                         }
&nbsp;14                     ]
&nbsp;15                 },
&nbsp;16                 "bye": {
&nbsp;17                     "listen": [":2016"],
&nbsp;18                     "routes": [
&nbsp;19                         {
&nbsp;20                             "handle": [{
&nbsp;21                                 "handler": "static_response",
&nbsp;22                                 "body": "Goodbye, world!"
&nbsp;23                             }]
&nbsp;24                         }
&nbsp;25                     ]
&nbsp;26                 }
&nbsp;27             }
&nbsp;28         }
&nbsp;29     }
&nbsp;30 }</pre><p>&#28982;&#21518;&#20877;&#27425;&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#26469;&#21152;&#36733;&#36825;&#20010;&#25991;&#20214;&#65306;</p><pre class="screen">curl localhost:2019/load \
	-X POST \
	-H "Content-Type: application/json" \
	-d @caddy.json</pre><p>&#28982;&#21518;&#22312;&#23458;&#25143;&#31471;&#20998;&#21035;&#35775;&#38382;&#65306;<strong class="userinput"><code>http://192.168.31.2:2015</code></strong>&#21644;<strong class="userinput"><code>http://192.168.31.2:2016</code></strong>&#65292;&#20250;&#30475;&#21040;&#8220;Hello, world!&#8221;&#21450;&#8220;Goodbye, world!&#8221;&#12290;</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in; &#xA;  "><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="themes/default/admon/tip.png"></td><th align="left">&#25552;&#31034;</th></tr><tr><td align="left" valign="top"><code class="filename">caddy.json</code>&#36825;&#20010;&#25991;&#20214;&#20063;&#21487;&#20197;&#36890;&#36807;&#21629;&#20196;&#34892;&#26469;&#20351;&#29992;&#65306;<span class="command"><strong>caddy start --config caddy.json</strong></span></td></tr></table></div></div><p>&#20351;&#29992;API&#21487;&#20197;&#20570;&#24456;&#22810;&#30340;&#20107;&#24773;&#65292;&#21253;&#25324;&#23548;&#20986;&#37197;&#32622;&#21644;&#23545;&#37197;&#32622;&#36827;&#34892;&#32454;&#31890;&#24230;&#30340;&#26356;&#25913;&#65288;&#32780;&#19981;&#26159;&#26356;&#26032;&#25972;&#20010;&#20869;&#23481;&#65289;&#12290;&#24314;&#35758;&#38405;&#35835;&#26356;&#23436;&#25972;&#30340;API&#25945;&#31243;&#65306;<a class="link" href="https://caddyserver.com/docs/api-tutorial" target="_top">https://caddyserver.com/docs/api-tutorial</a>&#21450;<a class="link" href="https://caddyserver.com/docs/api" target="_top">https://caddyserver.com/docs/api</a></p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e575"></a>4.&nbsp;&#37197;&#32622;&#27979;&#35797;&#21644;adapter</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e578"></a>4.1.&nbsp;&#23545;&#37197;&#32622;&#36827;&#34892;&#27979;&#35797;&#65288;Test config&#65289;</h3></div></div></div><p>&#22312;caddy&#21551;&#21160;&#20197;&#21518;&#65292;&#25105;&#20204;&#38543;&#26102;&#37117;&#21487;&#20197;&#22312;caddy server&#19978;&#20351;&#29992;<span class="command"><strong>curl</strong></span>&#21629;&#20196;&#36890;&#36807;GET&#35831;&#27714;&#26469;&#26597;&#30475;&#37197;&#32622;&#65306;</p><pre class="screen">curl localhost:2019/config/</pre><p>&#36825;&#20010;&#21629;&#20196;&#30452;&#33267;&#36755;&#20986;&#30340;&#32467;&#26524;&#26159;JSON&#26684;&#24335;&#30340;&#65292;&#38750;&#24120;&#19981;&#26131;&#35835;&#65292;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>jq</strong></span>&#21629;&#20196;&#26469;&#23558;&#20854;&#26684;&#24335;&#21270;&#65306;</p><pre class="screen">curl localhost:2019/config/ | jq</pre><p>&#21487;&#20197;&#30475;&#20986;&#65292;&#36755;&#20986;&#30340;&#32467;&#26524;&#21644;&#25105;&#20204;&#30340;&#37197;&#32622;&#26159;&#19968;&#33268;&#30340;&#12290;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#21629;&#20196;&#23558;&#24403;&#21069;&#30340;&#37197;&#32622;&#23548;&#20986;&#12290;</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e597"></a>4.2.&nbsp;adapter</h3></div></div></div><p>&#25105;&#20204;&#20250;&#30475;&#21040;&#19968;&#20010;JSON&#36755;&#20986;&#65292;caddy&#20351;&#29992;caddyfile adapter&#65288;config adapter&#65289;&#65292;&#23558;<code class="filename">Caddyfile</code>&#36716;&#25442;&#20026;JSON&#65288;Caddy's native JSON structure&#65289;&#26684;&#24335;&#12290;</p><p>&#22312;&#20351;&#29992;<span class="command"><strong>caddy run</strong></span>&#25110;<span class="command"><strong>caddy start</strong></span>&#21551;&#21160;caddy&#20197;&#21518;&#65292;&#21487;&#20197;&#22312;&#21478;&#22806;&#19968;&#20010;&#32456;&#31471;&#20013;&#36816;&#34892;&#19979;&#38754;&#30340;&#21629;&#20196;&#65306;</p><pre class="screen">curl localhost:2019/config/</pre><p>&#36890;&#36807;&#36825;&#20010;&#21629;&#20196;&#65292;&#21487;&#20197;&#26597;&#30475;&#24403;&#21069;&#30340;&#37197;&#32622;&#12290;</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e617"></a>5.&nbsp;JSON vs. Caddyfile</h2></div></div></div><p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#30693;&#36947;Caddyfile&#20250;&#34987;&#36716;&#25442;&#20026;JSON&#26684;&#24335;&#12290;&#23454;&#38469;&#19978;Caddyfile&#30340;&#37197;&#32622;&#26041;&#24335;&#23545;&#20154;&#26469;&#35828;&#26356;&#21451;&#22909;&#12289;&#26356;&#31616;&#21333;&#19968;&#20123;&#12290;&#20855;&#20307;&#26159;&#20351;&#29992;JSON&#36824;&#26159;Caddyfile&#65292;&#35201;&#21462;&#20915;&#20110;&#20855;&#20307;&#30340;&#22330;&#26223;&#12290;caddy&#30340;&#23448;&#26041;&#32593;&#31449;&#26377;&#19968;&#24352;&#34920;&#26684;&#65292;&#21487;&#20197;&#20379;&#21442;&#32771;&#65306;</p><div class="table"><a name="d0e622"></a><p class="title"><b>&#34920;&nbsp;2.1.&nbsp;JSON vs. Caddyfile</b></p><div class="table-contents"><table class="table" summary="JSON vs. Caddyfile" cellspacing="2pt" cellpadding="2pt" style="border-collapse: collapse;border-top: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-bottom: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-left: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-right: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; " width="100%"><colgroup><col width="50%" align="center" class="c1"><col width="50%" align="center" class="c2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">JSON</th><th style="border-bottom: 1px solid ; " align="center">Caddyfile</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Full range of Caddy functionality</td><td style="border-bottom: 1px solid ; " align="center">Most common parts of Caddy functionality</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Easy to generate</td><td style="border-bottom: 1px solid ; " align="center">Easy to craft by hand</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Easily programmable</td><td style="border-bottom: 1px solid ; " align="center">Difficult to automate</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Extremely expressive</td><td style="border-bottom: 1px solid ; " align="center">Moderately expressive</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Allows config traversal</td><td style="border-bottom: 1px solid ; " align="center">Cannot traverse within Caddyfile</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Partial config changes</td><td style="border-bottom: 1px solid ; " align="center">Whole config changes only</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Can be exported</td><td style="border-bottom: 1px solid ; " align="center">Cannot be exported</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Compatible with all API endpoints</td><td style="border-bottom: 1px solid ; " align="center">Compatible with some API endpoints</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Documentation generated automatically</td><td style="border-bottom: 1px solid ; " align="center">Documentation is hand-written</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Ubiquitous</td><td style="border-bottom: 1px solid ; " align="center">Niche</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">More efficient</td><td style="border-bottom: 1px solid ; " align="center">More computational</td></tr><tr><td style="border-right: 1px solid ; " align="center">Kind of boring</td><td style="" align="center">Kind of fun</td></tr></tbody></table></div></div><br class="table-break"><p>&#20854;&#23454;&#65292;&#20174;&#19978;&#38754;&#30340;&#34920;&#26684;&#21487;&#20197;&#30475;&#20986;&#65292;&#22914;&#26524;&#27604;&#36739;&#31934;&#36890;JSON&#37197;&#32622;&#30340;&#35805;&#65292;&#20284;&#20046;&#20351;&#29992;JSON&#36824;&#26159;&#26356;&#22909;&#30340;&#12290;</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e698"></a>6.&nbsp;API vs. Config files</h2></div></div></div><p>&#21478;&#22806;&#19968;&#28857;&#65292;&#23601;&#26159;&#22312;caddy&#37197;&#32622;&#31649;&#29702;&#20013;&#26159;&#20351;&#29992;API&#36824;&#26159;&#20351;&#29992;&#23427;&#30340;Caddyfile&#12290;&#20854;&#23454;&#21487;&#20197;&#21516;&#26102;&#20351;&#29992;&#65292;&#20294;&#20182;&#20204;&#23448;&#26041;&#24182;&#19981;&#25512;&#33616;&#65292;&#20182;&#20204;&#25512;&#33616;&#26368;&#22909;&#21482;&#20351;&#29992;&#19968;&#31181;&#12290;&#19968;&#31181;&#27604;&#36739;&#24120;&#35265;&#30340;&#32452;&#21512;&#26159;&#65306;JSON+API &#25110;&#32773; Caddyfile+CLI &#12290;&#19979;&#38754;&#30340;&#34920;&#26684;&#21487;&#20197;&#35753;&#25105;&#20204;&#29702;&#35299;API&#21644;Caddyfile&#30340;&#19968;&#20123;&#21306;&#21035;&#65306;</p><div class="table"><a name="d0e703"></a><p class="title"><b>&#34920;&nbsp;2.2.&nbsp;API vs. config files</b></p><div class="table-contents"><table class="table" summary="API vs. config files" cellspacing="2pt" cellpadding="2pt" style="border-collapse: collapse;border-top: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-bottom: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-left: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; border-right: 1px margin-left: 0.5in;&#xA;            margin-right: 0.5in;&#xA;            background: #FFFFFF;&#xA;            font-size: 8px;&#xA;            border: 1px solid #000000;&#xA;   1; " width="100%"><colgroup><col width="50%" align="center" class="c1"><col width="50%" align="center" class="c2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">JSON</th><th style="border-bottom: 1px solid ; " align="center">Caddyfile</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Make config changes with HTTP requests</td><td style="border-bottom: 1px solid ; " align="center">Make config changes with shell commands</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Easy to scale</td><td style="border-bottom: 1px solid ; " align="center">Difficult to scale</td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="center">Difficult to manage by hand</td><td style="border-bottom: 1px solid ; " align="center">Easy to manage by hand</td></tr><tr><td style="border-right: 1px solid ; " align="center">Really fun</td><td style="" align="center">Also fun</td></tr></tbody></table></div></div><br class="table-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e738"></a>7.&nbsp;&#38745;&#24577;&#25991;&#20214;&#26381;&#21153;&#22120;</h2></div></div></div><p>&#21551;&#29992;&#38745;&#24577;&#30340;&#25991;&#20214;&#26381;&#21153;&#22120;(file server)&#26377;&#20004;&#31181;&#31616;&#21333;&#30340;&#26041;&#24335;&#65306;&#19968;&#31181;&#26159;&#36890;&#36807;&#21629;&#20196;&#34892;&#65292;&#19968;&#31181;&#26159;&#36890;&#36807;Caddyfile&#12290;</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e743"></a>7.1.&nbsp;command line</h3></div></div></div><p>&#20351;&#29992;&#21629;&#20196;&#21551;&#21160;&#25991;&#20214;&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#22312;&#32456;&#31471;&#20013;&#20999;&#25442;&#21040;&#31449;&#28857;&#25152;&#22312;&#30340;&#30446;&#24405;&#65292;&#20363;&#22914;&#65306;<code class="filename">/var/www/html</code>&#65292;&#28982;&#21518;&#22312;&#36825;&#20010;&#30446;&#24405;&#19979;&#25191;&#34892;&#65306;<span class="command"><strong>caddy file-server</strong></span>&#65292;&#36825;&#26679;&#19968;&#20010;&#22522;&#26412;&#30340;&#38745;&#24577;&#25991;&#20214;&#26381;&#21153;&#22120;&#23601;&#22312;80&#31471;&#21475;&#24320;&#22987;&#36816;&#34892;&#20102;&#12290;&#22914;&#26524;&#22312;<code class="filename">/var/www/html</code>&#30446;&#24405;&#19979;&#26377;&#20010;<code class="filename">index.html</code>&#25991;&#20214;&#30340;&#35805;&#65292;&#22312;&#23458;&#25143;&#31471;&#30340;&#27983;&#35272;&#22120;&#20013;&#36755;&#20837;&#65306;<strong class="userinput"><code>http://192.168.31.2/</code></strong>&#23601;&#21487;&#20197;&#30452;&#25509;&#30475;&#21040;&#36825;&#20010;&#25991;&#20214;&#20102;&#12290;</p><p>&#22914;&#26524;&#24819;&#35201;caddy&#36816;&#34892;&#22312;&#20854;&#20182;&#30340;&#31471;&#21475;&#65292;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy file-server --listen :2015</strong></span>&#36825;&#20010;&#21629;&#20196;&#12290;</p><p>&#22914;&#26524;&#30446;&#24405;&#20013;&#27809;&#26377;<code class="filename">index.html</code>&#25991;&#20214;&#65292;&#24182;&#19988;&#24819;&#33021;&#22815;&#21015;&#20986;<code class="filename">/var/www/html</code>&#20013;&#30340;&#25991;&#20214;&#65292;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy file-server --browse</strong></span>&#36825;&#20010;&#21629;&#20196;&#12290;</p><p>&#22914;&#26524;&#24819;&#35201;&#20351;&#29992;&#25351;&#23450;&#30340;&#30446;&#24405;&#20316;&#20026;&#26681;&#30446;&#24405;&#65292;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>caddy file-server --root /path/to/yourSite</strong></span>&#36825;&#20010;&#21629;&#20196;&#12290;</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e784"></a>7.2.&nbsp;Caddyfile</h3></div></div></div><p>&#20351;&#29992;Caddyfile&#37197;&#32622;&#25991;&#20214;&#30340;&#26041;&#24335;&#23454;&#29616;&#25991;&#20214;&#26381;&#21153;&#22120;&#20063;&#38750;&#24120;&#31616;&#21333;&#65292;&#22914;&#26524;&#21482;&#26159;&#31616;&#21333;&#30340;&#21551;&#21160;&#23427;&#65292;&#19979;&#38754;&#30340;&#20004;&#34892;&#37197;&#32622;&#23601;&#22815;&#20102;&#65306;</p><pre class="screen">localhost
file_server</pre><p>&#22914;&#26524;&#24819;&#35201;&#21464;&#25442;&#31471;&#21475;&#65292;&#21482;&#38656;&#35201;&#23558;<em class="parameter"><code>localhost</code></em>&#26356;&#25913;&#20026;<em class="parameter"><code>localhost:2015</code></em>&#23601;&#21487;&#20197;&#20102;&#12290;</p><p>&#22914;&#26524;&#24819;&#35201;&#30446;&#24405;&#19979;&#30340;&#25991;&#20214;&#21487;&#21015;&#34920;&#27983;&#35272;&#65292;&#21487;&#20197;&#23558;<em class="parameter"><code>file_server</code></em>&#26367;&#25442;&#20026;<em class="parameter"><code>file_server browse</code></em></p><p>&#22914;&#26524;&#24819;&#35201;&#20174;&#23458;&#25143;&#31471;&#30340;&#27983;&#35272;&#22120;&#20013;&#21487;&#20197;&#35775;&#38382;&#65292;&#25105;&#20204;&#38656;&#35201;&#19979;&#38754;&#30340;&#37197;&#32622;&#65306;</p><pre class="screen">192.168.31.2
root * /var/www/
file_server browse</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e810"></a>8.&nbsp;&#21453;&#21521;&#20195;&#29702;</h2></div></div></div><p>&#20026;&#20102;&#35828;&#26126;&#21453;&#21521;&#20195;&#29702;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;Server1&#19978;&#23433;&#35013;&#19968;&#20010;web&#26381;&#21153;&#22120;&#12290;ip&#22320;&#22336;&#35774;&#32622;&#20026;192.168.31.10/24&#12290;</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e815"></a>8.1.&nbsp;command line</h3></div></div></div><p>&#20351;&#29992;&#22914;&#19979;&#30340;&#21629;&#20196;&#65306;</p><pre class="screen">caddy reverse-proxy --from :2016 --to 192.168.31.10:80</pre><p>&#24403;&#25105;&#20204;&#22312;&#23458;&#25143;&#31471;&#30340;&#27983;&#35272;&#22120;&#20013;&#36755;&#20837;<strong class="userinput"><code>http://192.168.31.2:2016</code></strong>&#26102;&#65292;&#23601;&#20250;&#30475;&#21040;Server1&#31449;&#28857;&#30340;&#20869;&#23481;&#12290;</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e827"></a>8.2.&nbsp;Caddyfile</h3></div></div></div><p>&#26356;&#25913;<code class="filename">Caddyfile</code>&#30340;&#20869;&#23481;&#65292;&#22914;&#19979;&#65306;</p><pre class="screen">:2016

reverse_proxy 192.168.31.10:9000</pre><p>&#28982;&#21518;&#20351;&#29992;<span class="command"><strong>caddy run</strong></span>&#21629;&#20196;&#26469;&#21551;&#21160;caddy&#65292;&#20877;&#27425;&#22312;&#23458;&#25143;&#31471;&#30340;&#27983;&#35272;&#22120;&#20013;&#36755;&#20837;<strong class="userinput"><code>http://192.168.31.2:2016</code></strong>&#26102;&#65292;&#23601;&#20250;&#30475;&#21040;Server1&#31449;&#28857;&#30340;&#20869;&#23481;&#12290;</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e845"></a>9.&nbsp;HTTPS</h2></div></div></div><p>HTTPS&#23545;&#20110;caddy&#26469;&#35828;&#26159;&#19968;&#20214;&#38750;&#24120;&#23481;&#26131;&#30340;&#20107;&#24773;&#65292;&#24403;caddy&#23433;&#35013;&#22909;&#20197;&#21518;&#40664;&#35748;&#23601;&#24102;HTTPS&#20102;&#65292;&#21482;&#35201;&#26377;&#19968;&#20010;&#22495;&#21517;&#65292;&#23601;&#21487;&#20197;&#21551;&#29992;HTTPS&#20102;&#12290;&#25105;&#20204;&#20351;&#29992;lognovel.com&#36825;&#20010;&#22495;&#21517;&#26469;&#35828;&#26126;&#22914;&#20309;&#37197;&#32622;HTTPS&#12290;</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e850"></a>9.1.&nbsp;Caddyfile</h3></div></div></div><p>&#24314;&#31435;&#19968;&#20010;&#26681;&#30446;&#24405;<code class="filename">/usr/local/work/lognovel.com</code>&#65292;&#22312;&#36825;&#20010;&#30446;&#24405;&#37324;&#24314;&#31435;&#19968;&#20010;<code class="filename">index.html</code>&#25991;&#20214;&#65292;<code class="filename">Caddyfile</code>&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="screen">lognovel.com www.lognovel.com {
	root * /usr/local/work/lognovel.com
	file_server
}
</pre><p>&#22312;&#27983;&#35272;&#22120;&#20013;&#36755;&#20837;<strong class="userinput"><code>http://lognovel.com</code></strong>&#25110;<strong class="userinput"><code>http://www.lognovel.com</code></strong>&#65292;&#20250;&#30475;&#21040;<code class="filename">index.html</code>&#37324;&#30340;&#20869;&#23481;&#12290;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#27983;&#35272;&#22120;&#22320;&#22336;&#26639;&#24038;&#30340;&#23567;&#38145;icon&#26469;&#26597;&#30475;https&#35777;&#20070;&#30340;&#24773;&#20917;&#12290;</p><div class="figure"><a name="d0e877"></a><p class="title"><b>&#22270;&nbsp;2.2.&nbsp;caddy https</b></p><div class="figure-contents"><div><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="200"><tr><td><img src="images/https.png" width="200" alt="caddy https"></td></tr></table></div></div></div><br class="figure-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d0e881"></a>9.2.&nbsp;&#20351;&#29992;&#21629;&#20196;</h3></div></div></div><p>&#20351;&#29992;&#19979;&#38754;&#30340;&#21629;&#20196;&#20063;&#21487;&#20197;&#36798;&#21040;&#19978;&#38754;&#37197;&#32622;&#25991;&#20214;&#30456;&#21516;&#30340;&#25928;&#26524;&#65306;</p><pre class="screen">caddy file-server --domain lognovel.com --root /usr/local/work/lognovel.com</pre></div></div><div class="footnotes"><br><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.d0e491" class="footnote"><p><a href="#d0e491" class="para"><sup class="para">[4] </sup></a>Heredoc&#65306;&#21521;&#20132;&#20114;&#24335;&#21629;&#20196;&#20256;&#36882;&#22810;&#34892;&#25991;&#26412;&#25110;&#20195;&#30721;&#30340;&#19968;&#31181;&#26041;&#24335;&#65292;&#31532;&#19968;&#34892;&#26159;&#20197;&#21487;&#36873;&#21629;&#20196;&#24320;&#22987;&#65292;&#32039;&#25509;&#30528;&#26159;&#37325;&#23450;&#21521;&#31526;&#21495; &lt;&lt;, &#20320;&#21487;&#20197;&#20351;&#29992;&#20219;&#20309;&#23383;&#31526;&#20018;&#20316;&#20026;&#20998;&#38548;&#31526;&#65292;&#25105;&#20204;&#26368;&#24120;&#29992;&#30340;&#26159; EOF(End Of File) &#25110;&#32773; END</p></div></div></div></div></body></html>